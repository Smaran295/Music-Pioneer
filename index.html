<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicPioneer - Your Music, Your Way</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#8B5CF6',
                        secondary: '#A78BFA',
                        dark: '#0F0F23',
                        darker: '#0A0A1A',
                        accent: '#F59E0B'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .gradient-bg { background: linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%); }
        .glass-effect { backdrop-filter: blur(10px); background: rgba(139, 92, 246, 0.1); }
        .hover-scale { transition: transform 0.2s ease; }
        .hover-scale:hover { transform: scale(1.05); }
        .playing-animation { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .spinning-disc { animation: spin 3s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .slide-in-right { animation: slideInRight 0.3s ease-out; }
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
        .slide-out-right { animation: slideOutRight 0.3s ease-in; }
        @keyframes slideOutRight { from { transform: translateX(0); } to { transform: translateX(100%); } }
        .main-content { padding-bottom: 120px; } /* Space for bottom player */
        
        /* Landing page animations */
        .fade-in-up { animation: fadeInUp 1s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-down { animation: fadeInDown 1s ease-out; }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-left { animation: fadeInLeft 1s ease-out; }
        @keyframes fadeInLeft { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
        .fade-in-right { animation: fadeInRight 1s ease-out; }
        @keyframes fadeInRight { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }
        
        /* Staggered animations */
        .animate-delay-1 { animation-delay: 0.2s; animation-fill-mode: both; }
        .animate-delay-2 { animation-delay: 0.4s; animation-fill-mode: both; }
        .animate-delay-3 { animation-delay: 0.6s; animation-fill-mode: both; }
        .animate-delay-4 { animation-delay: 0.8s; animation-fill-mode: both; }
        .animate-delay-5 { animation-delay: 1s; animation-fill-mode: both; }
    </style>
</head>
<body class="bg-darker text-white overflow-hidden">
    <!-- Landing Page -->
    <div id="landingPage" class="min-h-screen flex items-center justify-center relative overflow-hidden">
        <!-- Background Animation -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute -top-40 -right-40 w-80 h-80 bg-primary rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"></div>
            <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-secondary rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-accent rounded-full mix-blend-multiply filter blur-xl opacity-50 animate-pulse" style="animation-delay: 2s;"></div>
        </div>
        
        <!-- Floating Music Notes -->
        <div class="absolute inset-0 pointer-events-none">
            <div class="absolute top-20 left-20 text-4xl opacity-20 animate-bounce" style="animation-delay: 0.5s;">üéµ</div>
            <div class="absolute top-40 right-32 text-3xl opacity-30 animate-bounce" style="animation-delay: 1.5s;">üé∂</div>
            <div class="absolute bottom-32 left-40 text-5xl opacity-25 animate-bounce" style="animation-delay: 2.5s;">üéº</div>
            <div class="absolute bottom-20 right-20 text-3xl opacity-20 animate-bounce" style="animation-delay: 3s;">üé§</div>
            <div class="absolute top-1/3 left-1/4 text-2xl opacity-15 animate-bounce" style="animation-delay: 1s;">üé∏</div>
            <div class="absolute top-2/3 right-1/4 text-4xl opacity-25 animate-bounce" style="animation-delay: 2s;">üéπ</div>
        </div>
        
        <!-- Main Content -->
        <div class="relative z-10 text-center max-w-4xl mx-auto px-6">
            <!-- Logo Section -->
            <div class="mb-8 flex justify-center fade-in-down">
                <div class="relative group">
                    <!-- Main Logo Container -->
                    <div class="w-32 h-32 bg-gradient-to-br from-primary via-secondary to-accent rounded-3xl flex items-center justify-center shadow-2xl transform hover:scale-110 transition-all duration-500 hover:rotate-3 relative overflow-hidden">
                        <!-- Background Pattern -->
                        <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-3xl"></div>
                        <div class="absolute top-2 right-2 w-4 h-4 bg-white/20 rounded-full"></div>
                        <div class="absolute bottom-3 left-3 w-2 h-2 bg-white/30 rounded-full"></div>
                        
                        <!-- Custom Logo Design -->
                        <div class="relative z-10 flex flex-col items-center">
                            <!-- Musical Note with Pioneer Elements -->
                            <svg class="w-16 h-16 text-white drop-shadow-lg" viewBox="0 0 100 100" fill="currentColor">
                                <!-- Main note stem -->
                                <rect x="75" y="15" width="4" height="50" rx="2"/>
                                <!-- Note head -->
                                <ellipse cx="72" cy="65" rx="8" ry="6" transform="rotate(-20 72 65)"/>
                                <!-- Flag with pioneer design -->
                                <path d="M79 15 Q90 20 85 35 Q80 25 79 30 Z" fill="currentColor"/>
                                <!-- Pioneer compass/star -->
                                <g transform="translate(35,35)">
                                    <path d="M15 5 L18 12 L25 10 L20 17 L27 20 L20 23 L25 30 L18 28 L15 35 L12 28 L5 30 L10 23 L3 20 L10 17 L5 10 L12 12 Z" fill="currentColor"/>
                                    <circle cx="15" cy="20" r="3" fill="rgba(255,255,255,0.3)"/>
                                </g>
                                <!-- Sound waves -->
                                <path d="M45 45 Q55 40 50 50 Q55 60 45 55" stroke="currentColor" stroke-width="2" fill="none" opacity="0.7"/>
                                <path d="M50 42 Q62 35 55 55 Q62 65 50 58" stroke="currentColor" stroke-width="2" fill="none" opacity="0.5"/>
                            </svg>
                        </div>
                        
                        <!-- Glow effect -->
                        <div class="absolute inset-0 rounded-3xl bg-gradient-to-br from-primary/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl"></div>
                    </div>
                    
                    <!-- Logo Text -->
                    <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap">
                        <div class="text-xs font-bold text-primary tracking-wider opacity-80">MUSIC ‚Ä¢ PIONEER</div>
                    </div>
                </div>
            </div>
            
            <!-- Main Heading -->
            <h1 class="text-7xl font-bold mb-6 bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent leading-tight fade-in-up animate-delay-1">
                MusicPioneer
            </h1>
            
            <!-- Subtitle -->
            <p class="text-2xl text-gray-300 mb-4 font-light fade-in-up animate-delay-2">
                Your Music, Your Way
            </p>
            
            <!-- Description -->
            <p class="text-lg text-gray-400 mb-12 max-w-2xl mx-auto leading-relaxed fade-in-up animate-delay-3">
                Discover millions of songs, create personalized playlists, and experience music like never before. 
                Join the revolution of digital music streaming with advanced features and crystal-clear sound quality.
            </p>
            
            <!-- Features Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300 fade-in-left animate-delay-4">
                    <div class="text-4xl mb-4">üéµ</div>
                    <h3 class="text-xl font-semibold mb-2 text-white">Unlimited Music</h3>
                    <p class="text-gray-400 text-sm">Access millions of songs from your favorite artists worldwide</p>
                </div>
                
                <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300 fade-in-up animate-delay-4">
                    <div class="text-4xl mb-4">üéß</div>
                    <h3 class="text-xl font-semibold mb-2 text-white">High Quality Audio</h3>
                    <p class="text-gray-400 text-sm">Experience crystal-clear sound with lossless audio streaming</p>
                </div>
                
                <div class="glass-effect rounded-2xl p-6 hover:scale-105 transition-transform duration-300 fade-in-right animate-delay-4">
                    <div class="text-4xl mb-4">üì±</div>
                    <h3 class="text-xl font-semibold mb-2 text-white">Cross Platform</h3>
                    <p class="text-gray-400 text-sm">Enjoy your music anywhere, on any device, anytime</p>
                </div>
            </div>
            
            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center fade-in-up animate-delay-5">
                <button id="getStartedBtn" class="bg-gradient-to-r from-primary to-secondary hover:from-secondary hover:to-primary text-white font-bold py-4 px-12 rounded-full text-lg shadow-2xl transform hover:scale-105 transition-all duration-300 hover:shadow-primary/50">
                    Get Started Free
                </button>
                
                <button id="learnMoreBtn" class="border-2 border-primary text-primary hover:bg-primary hover:text-white font-semibold py-4 px-12 rounded-full text-lg transition-all duration-300">
                    Learn More
                </button>
            </div>
            
            <!-- Stats -->
            <div class="mt-16 grid grid-cols-1 sm:grid-cols-3 gap-8 text-center">
                <div class="fade-in-up animate-delay-5">
                    <div class="text-3xl font-bold text-primary mb-2">50M+</div>
                    <div class="text-gray-400 text-sm">Songs Available</div>
                </div>
                <div class="fade-in-up animate-delay-5">
                    <div class="text-3xl font-bold text-secondary mb-2">10M+</div>
                    <div class="text-gray-400 text-sm">Active Users</div>
                </div>
                <div class="fade-in-up animate-delay-5">
                    <div class="text-3xl font-bold text-accent mb-2">180+</div>
                    <div class="text-gray-400 text-sm">Countries</div>
                </div>
            </div>
        </div>
        
        <!-- Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
            <div class="w-6 h-10 border-2 border-gray-400 rounded-full flex justify-center">
                <div class="w-1 h-3 bg-gray-400 rounded-full mt-2 animate-pulse"></div>
            </div>
        </div>
    </div>

    <!-- Main App (Initially Hidden) -->
    <div id="mainApp" class="flex h-screen hidden">
        <!-- Sidebar -->
        <div class="w-64 bg-dark border-r border-gray-800 flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-800">
                <div class="flex items-center space-x-3 cursor-pointer hover:opacity-80 transition-opacity" id="logoButton">
                    <div class="w-10 h-10 gradient-bg rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                        </svg>
                    </div>
                    <h1 class="text-xl font-bold">MusicPioneer</h1>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 p-4">
                <div class="space-y-2">
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg bg-primary text-white">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                        </svg>
                        <span class="font-medium">Home</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-800 transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                        <span>Search</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-800 transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span>Your Library</span>
                    </a>
                </div>

                <div class="mt-8">
                    <h3 class="text-sm font-semibold text-gray-400 mb-4 uppercase tracking-wider">Playlists</h3>
                    <div class="space-y-2">
                        <a href="#" id="likedSongsLink" class="block p-2 rounded hover:bg-gray-800 transition-colors text-sm">Liked Songs</a>
                        <a href="#" id="recentlyPlayedLink" class="block p-2 rounded hover:bg-gray-800 transition-colors text-sm">Recently Played</a>
                        <a href="#" id="yourPlaylistLink" class="block p-2 rounded hover:bg-gray-800 transition-colors text-sm">Your Own Playlist</a>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col">
            <!-- Top Bar -->
            <header class="bg-dark border-b border-gray-800 p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <!-- Navigation arrows removed -->
                    </div>
                    
                    <div class="flex-1"></div>

                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <button id="userMenuButton" class="w-8 h-8 bg-primary rounded-full flex items-center justify-center hover:bg-secondary transition-colors">
                                <span class="text-sm font-semibold">MP</span>
                            </button>
                            <!-- User Dropdown Menu -->
                            <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg border border-gray-700 hidden z-50">
                                <div class="p-3 border-b border-gray-700">
                                    <p class="font-semibold">Music Pioneer</p>
                                    <p class="text-sm text-gray-400">Free Plan</p>
                                </div>
                                <div class="py-2">
                                    <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-700 transition-colors">Account</a>
                                    <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-700 transition-colors">Profile</a>
                                    <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-700 transition-colors">Settings</a>
                                    <hr class="border-gray-700 my-2">
                                    <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-700 transition-colors">Log out</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto scrollbar-hide p-6 main-content">
                <!-- Home Content -->
                <div id="homeContent">
                    <!-- Hero Section -->
                    <section class="mb-8">
                        <div class="gradient-bg rounded-2xl p-8 text-white">
                            <h2 class="text-4xl font-bold mb-2">Good evening</h2>
                            <p class="text-lg opacity-90">Ready to discover your next favorite song?</p>
                        </div>
                    </section>
                </div>

                <!-- Search Content -->
                <div id="searchContent" class="hidden">
                    <!-- Search Header -->
                    <section class="mb-8">
                        <h2 class="text-4xl font-bold mb-4">Search</h2>
                        <div class="relative max-w-2xl">
                            <input type="text" id="mainSearchInput" placeholder="What do you want to listen to?" 
                                   class="w-full bg-gray-800 border border-gray-700 rounded-full py-4 pl-12 pr-4 text-lg focus:outline-none focus:border-primary">
                            <svg class="w-6 h-6 absolute left-4 top-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                        </div>
                    </section>

                    <!-- Search Results -->
                    <div id="searchResults" class="hidden">
                        <!-- Top Results -->
                        <section class="mb-8">
                            <h3 class="text-2xl font-bold mb-4">Top result</h3>
                            <div id="topResult" class="bg-gray-800 rounded-lg p-6 hover:bg-gray-700 transition-colors cursor-pointer max-w-md">
                                <!-- Top result will be populated here -->
                            </div>
                        </section>

                        <!-- Songs -->
                        <section class="mb-8">
                            <h3 class="text-2xl font-bold mb-4">Songs</h3>
                            <div id="songResults" class="space-y-2">
                                <!-- Song results will be populated here -->
                            </div>
                        </section>

                        <!-- Artists -->
                        <section class="mb-8">
                            <h3 class="text-2xl font-bold mb-4">Artists</h3>
                            <div id="artistResults" class="grid grid-cols-5 gap-6">
                                <!-- Artist results will be populated here -->
                            </div>
                        </section>

                        <!-- Albums -->
                        <section class="mb-8">
                            <h3 class="text-2xl font-bold mb-4">Albums</h3>
                            <div id="albumResults" class="grid grid-cols-5 gap-6">
                                <!-- Album results will be populated here -->
                            </div>
                        </section>
                    </div>

                    <!-- Browse Categories (shown when no search) -->
                    <div id="browseCategories">
                        <section class="mb-8">
                            <h3 class="text-2xl font-bold mb-4">Browse all</h3>
                            <div class="grid grid-cols-4 gap-6">
                                <div class="bg-gradient-to-br from-red-500 to-pink-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">Pop</h4>
                                </div>
                                <div class="bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">Rock</h4>
                                </div>
                                <div class="bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">Hip-Hop</h4>
                                </div>
                                <div class="bg-gradient-to-br from-purple-500 to-indigo-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">Electronic</h4>
                                </div>
                                <div class="bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">Jazz</h4>
                                </div>
                                <div class="bg-gradient-to-br from-teal-500 to-blue-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">Classical</h4>
                                </div>
                                <div class="bg-gradient-to-br from-pink-500 to-rose-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">R&B</h4>
                                </div>
                                <div class="bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg p-6 h-32 flex items-end cursor-pointer hover-scale">
                                    <h4 class="text-xl font-bold text-white">Country</h4>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <!-- World's Top Hits -->
                <div id="homeOnlyContent">
                    <section class="mb-8">
                        <h3 class="text-2xl font-bold mb-4">World's Top Hits</h3>
                        <div class="space-y-3">
                            <div class="bg-gray-800 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                                <div class="flex items-center space-x-4">
                                    <span class="text-primary font-bold text-lg w-6">1</span>
                                    <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-500 rounded flex items-center justify-center text-lg">
                                        üåü
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Blinding Lights</h4>
                                        <p class="text-sm text-gray-400">The Weeknd</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Like">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Add to Playlist">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Download">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                        </svg>
                                    </button>
                                    <span class="text-sm text-gray-400">3:20</span>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="bg-gray-800 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                                <div class="flex items-center space-x-4">
                                    <span class="text-primary font-bold text-lg w-6">2</span>
                                    <div class="w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-500 rounded flex items-center justify-center text-lg">
                                        üíñ
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Shape of You</h4>
                                        <p class="text-sm text-gray-400">Ed Sheeran</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Like">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Add to Playlist">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Download">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                        </svg>
                                    </button>
                                    <span class="text-sm text-gray-400">3:53</span>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="bg-gray-800 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                                <div class="flex items-center space-x-4">
                                    <span class="text-primary font-bold text-lg w-6">3</span>
                                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-500 rounded flex items-center justify-center text-lg">
                                        üëë
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Bohemian Rhapsody</h4>
                                        <p class="text-sm text-gray-400">Queen</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Like">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Add to Playlist">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Download">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                        </svg>
                                    </button>
                                    <span class="text-sm text-gray-400">5:55</span>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="bg-gray-800 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                                <div class="flex items-center space-x-4">
                                    <span class="text-primary font-bold text-lg w-6">4</span>
                                    <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded flex items-center justify-center text-lg">
                                        üíî
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Someone Like You</h4>
                                        <p class="text-sm text-gray-400">Adele</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Like">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Add to Playlist">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Download">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                        </svg>
                                    </button>
                                    <span class="text-sm text-gray-400">4:45</span>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="bg-gray-800 rounded-lg p-4 flex items-center justify-between hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                                <div class="flex items-center space-x-4">
                                    <span class="text-primary font-bold text-lg w-6">5</span>
                                    <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-pink-500 rounded flex items-center justify-center text-lg">
                                        üï∫
                                    </div>
                                    <div>
                                        <h4 class="font-semibold">Billie Jean</h4>
                                        <p class="text-sm text-gray-400">Michael Jackson</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Like">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Add to Playlist">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"/>
                                        </svg>
                                    </button>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors" title="Download">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                        </svg>
                                    </button>
                                    <span class="text-sm text-gray-400">4:54</span>
                                    <button class="p-2 hover:bg-gray-600 rounded-full transition-colors">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Liked Songs Content -->
                <div id="likedSongsContent" class="hidden">
                    <section class="mb-8">
                        <div class="flex items-center space-x-6 mb-8">
                            <div class="w-60 h-60 bg-gradient-to-br from-red-500 to-pink-500 rounded-lg flex items-center justify-center">
                                <svg class="w-24 h-24 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400 mb-2">PLAYLIST</p>
                                <h1 class="text-6xl font-bold mb-4">Liked Songs</h1>
                                <p class="text-gray-400">Music Pioneer ‚Ä¢ 127 songs</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-6 mb-8">
                            <button class="bg-primary hover:bg-secondary text-white rounded-full p-4">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                            <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="space-y-2">
                            <div class="grid grid-cols-12 gap-4 px-4 py-2 text-sm text-gray-400 border-b border-gray-800">
                                <div class="col-span-1">#</div>
                                <div class="col-span-5">TITLE</div>
                                <div class="col-span-3">ALBUM</div>
                                <div class="col-span-2">DATE ADDED</div>
                                <div class="col-span-1">‚è±</div>
                            </div>
                            
                            <div class="space-y-1" id="likedSongsList">
                                <!-- Liked songs will be populated here -->
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Recently Played Content -->
                <div id="recentlyPlayedContent" class="hidden">
                    <section class="mb-8">
                        <div class="flex items-center space-x-6 mb-8">
                            <div class="w-60 h-60 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center">
                                <svg class="w-24 h-24 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400 mb-2">PLAYLIST</p>
                                <h1 class="text-6xl font-bold mb-4">Recently Played</h1>
                                <p class="text-gray-400">Music Pioneer ‚Ä¢ 45 songs</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-6 mb-8">
                            <button class="bg-primary hover:bg-secondary text-white rounded-full p-4">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="space-y-2">
                            <div class="grid grid-cols-12 gap-4 px-4 py-2 text-sm text-gray-400 border-b border-gray-800">
                                <div class="col-span-1">#</div>
                                <div class="col-span-5">TITLE</div>
                                <div class="col-span-3">ALBUM</div>
                                <div class="col-span-2">PLAYED</div>
                                <div class="col-span-1">‚è±</div>
                            </div>
                            
                            <div class="space-y-1" id="recentlyPlayedList">
                                <!-- Recently played songs will be populated here -->
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Your Own Playlist Content -->
                <div id="yourPlaylistContent" class="hidden">
                    <section class="mb-8">
                        <div class="flex items-center space-x-6 mb-8">
                            <div class="w-60 h-60 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-lg flex items-center justify-center">
                                <span class="text-8xl">üéµ</span>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400 mb-2">PLAYLIST</p>
                                <h1 class="text-6xl font-bold mb-4">Your Own Playlist</h1>
                                <p class="text-gray-400">Music Pioneer ‚Ä¢ 23 songs</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-6 mb-8">
                            <button class="bg-primary hover:bg-secondary text-white rounded-full p-4">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                            <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="space-y-2">
                            <div class="grid grid-cols-12 gap-4 px-4 py-2 text-sm text-gray-400 border-b border-gray-800">
                                <div class="col-span-1">#</div>
                                <div class="col-span-5">TITLE</div>
                                <div class="col-span-3">ALBUM</div>
                                <div class="col-span-2">DATE ADDED</div>
                                <div class="col-span-1">‚è±</div>
                            </div>
                            
                            <div class="space-y-1" id="yourPlaylistList">
                                <!-- Your playlist songs will be populated here -->
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Account Content -->
                <div id="accountContent" class="hidden">
                    <section class="mb-8">
                        <h2 class="text-4xl font-bold mb-6">Account Overview</h2>
                        
                        <!-- Account Info Card -->
                        <div class="bg-gray-800 rounded-lg p-6 mb-6">
                            <div class="flex items-center space-x-6 mb-6">
                                <div class="w-24 h-24 bg-primary rounded-full flex items-center justify-center text-3xl font-bold">
                                    MP
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold mb-2">Music Pioneer</h3>
                                    <p class="text-gray-400 mb-1">musicpioneer@email.com</p>
                                    <p class="text-sm text-gray-500">Free Plan ‚Ä¢ Member since March 2024</p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-3 gap-6">
                                <div class="text-center">
                                    <h4 class="text-2xl font-bold text-primary">127</h4>
                                    <p class="text-sm text-gray-400">Liked Songs</p>
                                </div>
                                <div class="text-center">
                                    <h4 class="text-2xl font-bold text-primary">23</h4>
                                    <p class="text-sm text-gray-400">Playlists</p>
                                </div>
                                <div class="text-center">
                                    <h4 class="text-2xl font-bold text-primary">1,247</h4>
                                    <p class="text-sm text-gray-400">Hours Listened</p>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="grid grid-cols-1 gap-6 mb-6 max-w-md">
                            <div class="bg-gray-800 rounded-lg p-6">
                                <h4 class="text-lg font-semibold mb-4">Privacy</h4>
                                <p class="text-gray-400 mb-4">Manage your privacy settings and data preferences.</p>
                                <button class="bg-primary hover:bg-secondary text-white px-4 py-2 rounded-lg transition-colors">
                                    Privacy Settings
                                </button>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="bg-gray-800 rounded-lg p-6">
                            <h4 class="text-lg font-semibold mb-4">Recent Activity</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between py-2 border-b border-gray-700">
                                    <span class="text-sm">Liked "Blinding Lights" by The Weeknd</span>
                                    <span class="text-xs text-gray-400">2 hours ago</span>
                                </div>
                                <div class="flex items-center justify-between py-2 border-b border-gray-700">
                                    <span class="text-sm">Created playlist "Road Trip Vibes"</span>
                                    <span class="text-xs text-gray-400">1 day ago</span>
                                </div>
                                <div class="flex items-center justify-between py-2 border-b border-gray-700">
                                    <span class="text-sm">Followed artist "Dua Lipa"</span>
                                    <span class="text-xs text-gray-400">3 days ago</span>
                                </div>
                                <div class="flex items-center justify-between py-2">
                                    <span class="text-sm">Updated profile picture</span>
                                    <span class="text-xs text-gray-400">1 week ago</span>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Profile Content -->
                <div id="profileContent" class="hidden">
                    <section class="mb-8">
                        <h2 class="text-4xl font-bold mb-6">Edit Profile</h2>
                        
                        <div class="max-w-2xl">
                            <!-- Profile Picture -->
                            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                                <h3 class="text-xl font-semibold mb-4">Profile Picture</h3>
                                <div class="flex items-center space-x-6">
                                    <div class="w-32 h-32 bg-primary rounded-full flex items-center justify-center text-4xl font-bold">
                                        MP
                                    </div>
                                    <div>
                                        <button class="bg-primary hover:bg-secondary text-white px-4 py-2 rounded-lg mb-2 transition-colors">
                                            Choose Photo
                                        </button>
                                        <p class="text-sm text-gray-400">JPG, PNG or GIF. Max size 2MB.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Profile Information -->
                            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                                <h3 class="text-xl font-semibold mb-4">Profile Information</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Display Name</label>
                                        <input type="text" value="Music Pioneer" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Username</label>
                                        <input type="text" value="musicpioneer2024" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Bio</label>
                                        <textarea rows="3" placeholder="Tell us about yourself..." class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary resize-none">Music lover exploring all genres üéµ</textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Country</label>
                                        <select class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                            <option>United States</option>
                                            <option>Canada</option>
                                            <option>United Kingdom</option>
                                            <option>Australia</option>
                                            <option>Germany</option>
                                            <option>France</option>
                                            <option>Other</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="flex space-x-4 mt-6">
                                    <button class="bg-primary hover:bg-secondary text-white px-6 py-2 rounded-lg transition-colors">
                                        Save Changes
                                    </button>
                                    <button class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors">
                                        Cancel
                                    </button>
                                </div>
                            </div>

                            <!-- Social Links -->
                            <div class="bg-gray-800 rounded-lg p-6">
                                <h3 class="text-xl font-semibold mb-4">Social Links</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Instagram</label>
                                        <input type="text" placeholder="@username" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Twitter</label>
                                        <input type="text" placeholder="@username" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Website</label>
                                        <input type="url" placeholder="https://yourwebsite.com" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Settings Content -->
                <div id="settingsContent" class="hidden">
                    <section class="mb-8">
                        <h2 class="text-4xl font-bold mb-6">Settings</h2>
                        
                        <div class="max-w-4xl space-y-6">
                            <!-- Audio Settings -->
                            <div class="bg-gray-800 rounded-lg p-6">
                                <h3 class="text-xl font-semibold mb-4">Audio Quality</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Streaming Quality</label>
                                        <select class="w-full max-w-md bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                            <option>High (320 kbps)</option>
                                            <option>Normal (160 kbps)</option>
                                            <option>Low (96 kbps)</option>
                                        </select>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <input type="checkbox" id="autoplay" class="w-4 h-4 text-primary bg-gray-700 border-gray-600 rounded focus:ring-primary">
                                        <label for="autoplay" class="text-sm text-gray-300">Enable Autoplay</label>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <input type="checkbox" id="crossfade" class="w-4 h-4 text-primary bg-gray-700 border-gray-600 rounded focus:ring-primary" checked>
                                        <label for="crossfade" class="text-sm text-gray-300">Crossfade between songs</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Playback Settings -->
                            <div class="bg-gray-800 rounded-lg p-6">
                                <h3 class="text-xl font-semibold mb-4">Playback</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Volume Level</label>
                                        <div class="flex items-center space-x-4">
                                            <span class="text-sm text-gray-400">Quiet</span>
                                            <div class="flex-1 max-w-md">
                                                <input type="range" min="0" max="100" value="75" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
                                            </div>
                                            <span class="text-sm text-gray-400">Loud</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <input type="checkbox" id="normalize" class="w-4 h-4 text-primary bg-gray-700 border-gray-600 rounded focus:ring-primary" checked>
                                        <label for="normalize" class="text-sm text-gray-300">Normalize volume</label>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <input type="checkbox" id="gapless" class="w-4 h-4 text-primary bg-gray-700 border-gray-600 rounded focus:ring-primary">
                                        <label for="gapless" class="text-sm text-gray-300">Gapless playback</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Privacy Settings -->
                            <div class="bg-gray-800 rounded-lg p-6">
                                <h3 class="text-xl font-semibold mb-4">Privacy</h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h4 class="text-sm font-medium text-gray-300">Make my playlists public</h4>
                                            <p class="text-xs text-gray-400">Others can see and follow your playlists</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h4 class="text-sm font-medium text-gray-300">Show my listening activity</h4>
                                            <p class="text-xs text-gray-400">Let friends see what you're listening to</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h4 class="text-sm font-medium text-gray-300">Allow explicit content</h4>
                                            <p class="text-xs text-gray-400">Show songs with explicit lyrics</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Notifications -->
                            <div class="bg-gray-800 rounded-lg p-6">
                                <h3 class="text-xl font-semibold mb-4">Notifications</h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h4 class="text-sm font-medium text-gray-300">New music from artists you follow</h4>
                                            <p class="text-xs text-gray-400">Get notified when artists release new music</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h4 class="text-sm font-medium text-gray-300">Playlist updates</h4>
                                            <p class="text-xs text-gray-400">When someone adds to your collaborative playlists</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>

                                </div>
                            </div>

                            <!-- Language & Region -->
                            <div class="bg-gray-800 rounded-lg p-6">
                                <h3 class="text-xl font-semibold mb-4">Language & Region</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Language</label>
                                        <select class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                            <option>English</option>
                                            <option>Spanish</option>
                                            <option>French</option>
                                            <option>German</option>
                                            <option>Portuguese</option>
                                            <option>Italian</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Country/Region</label>
                                        <select class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-primary">
                                            <option>United States</option>
                                            <option>Canada</option>
                                            <option>United Kingdom</option>
                                            <option>Australia</option>
                                            <option>Germany</option>
                                            <option>France</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Save Button -->
                            <div class="flex justify-center mt-8 pt-6 border-t border-gray-700">
                                <button class="bg-primary hover:bg-secondary text-white px-12 py-4 rounded-lg transition-colors font-semibold text-lg shadow-lg">
                                    Save All Settings
                                </button>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Library Content -->
                <div id="libraryContent" class="hidden">
                    <section class="mb-8">
                        <h2 class="text-4xl font-bold mb-6">Your Library</h2>
                        
                        <!-- Filter Tabs -->
                        <div class="flex space-x-4 mb-6">
                            <button class="bg-primary text-white px-4 py-2 rounded-full text-sm font-medium">All</button>
                            <button class="bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors">Playlists</button>
                            <button class="bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors">Artists</button>
                            <button class="bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors">Albums</button>
                        </div>

                        <!-- Library Items -->
                        <div class="space-y-3">
                            <div class="flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer">
                                <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-pink-500 rounded flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold">Liked Songs</h4>
                                    <p class="text-sm text-gray-400">127 songs</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded flex items-center justify-center text-lg">
                                    üéµ
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold">Your Own Playlist</h4>
                                    <p class="text-sm text-gray-400">Playlist ‚Ä¢ 23 songs</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer">
                                <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded flex items-center justify-center text-lg">
                                    üé∏
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold">Rock Classics</h4>
                                    <p class="text-sm text-gray-400">Playlist ‚Ä¢ 50 songs</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer">
                                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-500 rounded flex items-center justify-center text-lg">
                                    üé§
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold">Pop Hits 2024</h4>
                                    <p class="text-sm text-gray-400">Playlist ‚Ä¢ 75 songs</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer">
                                <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-500 rounded flex items-center justify-center text-lg">
                                    üéπ
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold">Jazz Essentials</h4>
                                    <p class="text-sm text-gray-400">Album ‚Ä¢ Various Artists</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Recently Played -->
                <section id="recentlyPlayedSection">
                    <h3 class="text-2xl font-bold mb-4">Recently played</h3>
                    <div class="grid grid-cols-5 gap-6">
                        <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                            <div class="w-full h-32 bg-gradient-to-br from-pink-500 to-rose-500 rounded-lg mb-4 flex items-center justify-center">
                                <span class="text-2xl font-bold text-white">üéµ</span>
                            </div>
                            <h4 class="font-semibold mb-1">Midnight Vibes</h4>
                            <p class="text-sm text-gray-400">Album ‚Ä¢ Artist Name</p>
                        </div>
                        <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                            <div class="w-full h-32 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg mb-4 flex items-center justify-center">
                                <span class="text-2xl font-bold text-white">üé∏</span>
                            </div>
                            <h4 class="font-semibold mb-1">Rock Classics</h4>
                            <p class="text-sm text-gray-400">Playlist ‚Ä¢ 50 songs</p>
                        </div>
                        <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                            <div class="w-full h-32 bg-gradient-to-br from-teal-500 to-blue-500 rounded-lg mb-4 flex items-center justify-center">
                                <span class="text-2xl font-bold text-white">üéπ</span>
                            </div>
                            <h4 class="font-semibold mb-1">Jazz Essentials</h4>
                            <p class="text-sm text-gray-400">Album ‚Ä¢ Various Artists</p>
                        </div>
                        <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                            <div class="w-full h-32 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-lg mb-4 flex items-center justify-center">
                                <span class="text-2xl font-bold text-white">üé§</span>
                            </div>
                            <h4 class="font-semibold mb-1">Pop Hits 2024</h4>
                            <p class="text-sm text-gray-400">Playlist ‚Ä¢ 75 songs</p>
                        </div>
                        <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                            <div class="w-full h-32 bg-gradient-to-br from-red-500 to-pink-500 rounded-lg mb-4 flex items-center justify-center">
                                <span class="text-2xl font-bold text-white">üéß</span>
                            </div>
                            <h4 class="font-semibold mb-1">Electronic Beats</h4>
                            <p class="text-sm text-gray-400">Album ‚Ä¢ DJ Mix</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Now Playing Interface -->
        <div id="nowPlayingInterface" class="fixed inset-0 bg-darker z-50 hidden">
            <div class="flex h-full">
                <!-- Main Player Area -->
                <div class="flex-1 flex flex-col items-center justify-center p-8">
                    <!-- Album Art with Spinning Disc -->
                    <div class="relative mb-8">
                        <div id="albumDisc" class="w-80 h-80 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center spinning-disc">
                            <div class="w-72 h-72 rounded-full bg-gray-900 flex items-center justify-center">
                                <div class="w-16 h-16 rounded-full bg-gray-800 flex items-center justify-center">
                                    <div class="w-4 h-4 rounded-full bg-gray-600"></div>
                                </div>
                                <div id="discEmoji" class="absolute text-8xl">üåü</div>
                            </div>
                        </div>
                    </div>

                    <!-- Song Info -->
                    <div class="text-center mb-8">
                        <h1 id="nowPlayingTitle" class="text-4xl font-bold mb-2">Blinding Lights</h1>
                        <p id="nowPlayingArtist" class="text-xl text-gray-400">The Weeknd</p>
                    </div>

                    <!-- Progress Bar -->
                    <div class="w-full max-w-2xl mb-8">
                        <div class="flex items-center space-x-4">
                            <span id="currentTime" class="text-sm text-gray-400">1:23</span>
                            <div id="progressBar" class="flex-1 bg-gray-700 rounded-full h-2 cursor-pointer hover:h-3 transition-all group">
                                <div id="progressIndicator" class="bg-primary rounded-full h-2 w-1/3 transition-all duration-300 group-hover:h-3 relative">
                                    <div class="absolute right-0 top-1/2 transform -translate-y-1/2 w-3 h-3 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"></div>
                                </div>
                            </div>
                            <span id="totalTime" class="text-sm text-gray-400">3:20</span>
                        </div>
                    </div>

                    <!-- Player Controls -->
                    <div class="flex items-center space-x-8">
                        <button class="p-3 hover:bg-gray-800 rounded-full transition-colors">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M7 7h10v3l4-4-4-4v3H5v6h2V7z"/>
                            </svg>
                        </button>
                        <button id="prevButton" class="p-4 hover:bg-gray-800 rounded-full transition-colors" title="Previous">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                            </svg>
                        </button>
                        <button id="mainPlayPause" class="p-6 bg-primary hover:bg-secondary rounded-full transition-colors">
                            <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </button>
                        <button id="nextButton" class="p-4 hover:bg-gray-800 rounded-full transition-colors" title="Next">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                            </svg>
                        </button>
                        <button class="p-3 hover:bg-gray-800 rounded-full transition-colors">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Additional Controls -->
                    <div class="flex items-center space-x-6 mt-8">
                        <button id="likeButton" class="p-2 hover:bg-gray-800 rounded-full transition-colors" title="Like">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </button>
                        <button id="mainLyricsButton" class="p-2 hover:bg-gray-800 rounded-full transition-colors" title="Show Lyrics">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M9 3v2H7v2H5v2H3v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h2v-2h-2V7h-2V5h-2V3H9zm0 2h4v2h2v2h2v2h-2v2h-2v2H9v-2H7v-2H5V9h2V7h2V5z"/>
                            </svg>
                        </button>
                        <div class="flex items-center space-x-2">
                            <button id="volumeButton" title="Volume">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
                                </svg>
                            </button>
                            <div id="volumeSlider" class="w-24 bg-gray-700 rounded-full h-1 cursor-pointer">
                                <div id="volumeIndicator" class="bg-primary rounded-full h-1 w-2/3 transition-all"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Queue Sidebar -->
                <div class="w-96 bg-dark border-l border-gray-800 p-6 overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex space-x-4">
                            <button id="queueTab" class="text-xl font-bold text-primary border-b-2 border-primary pb-1">Queue</button>
                            <button id="lyricsTab" class="text-xl font-bold text-gray-400 hover:text-white transition-colors pb-1">Lyrics</button>
                        </div>
                        <button id="closeNowPlaying" class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Queue Content -->
                    <div id="queueContent">
                        <!-- Now Playing -->
                        <div class="mb-6">
                            <h4 class="text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider">Now Playing</h4>
                            <div class="flex items-center space-x-3 p-3 bg-gray-800 rounded-lg">
                                <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-500 rounded flex items-center justify-center text-lg">
                                    üåü
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-sm">Blinding Lights</h5>
                                    <p class="text-xs text-gray-400">The Weeknd</p>
                                </div>
                            </div>
                        </div>

                        <!-- Up Next -->
                        <div>
                            <h4 class="text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wider">Up Next</h4>
                            <div class="space-y-2" id="queueList">
                                <!-- Queue items will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Lyrics Content -->
                    <div id="lyricsContent" class="hidden">
                        <div class="mb-4">
                            <h4 class="text-sm font-semibold text-gray-400 mb-2 uppercase tracking-wider">Lyrics</h4>
                            <div class="text-center mb-4">
                                <h5 id="lyricsTitle" class="font-semibold text-lg">Blinding Lights</h5>
                                <p id="lyricsArtist" class="text-sm text-gray-400">The Weeknd</p>
                            </div>
                        </div>
                        
                        <div id="lyricsText" class="space-y-4 text-sm leading-relaxed">
                            <div class="lyrics-line opacity-60">Yeah</div>
                            <div class="lyrics-line opacity-60">I've been tryna call</div>
                            <div class="lyrics-line opacity-60">I've been on my own for long enough</div>
                            <div class="lyrics-line opacity-60">Maybe you can show me how to love, maybe</div>
                            <div class="lyrics-line opacity-60">I feel like I'm just missing</div>
                            <div class="lyrics-line opacity-60">Something when you're gone</div>
                            <div class="lyrics-line opacity-60">Something in the way you move</div>
                            <div class="lyrics-line opacity-60">Makes me feel like I can't live without you</div>
                            <div class="lyrics-line opacity-60">It takes me all the way</div>
                            <div class="lyrics-line opacity-60">I want you to stay</div>
                            <div class="lyrics-line text-primary font-semibold opacity-100">I feel like I'm just missing something when you're gone</div>
                            <div class="lyrics-line opacity-60">Something in the way you move</div>
                            <div class="lyrics-line opacity-60">Makes me feel like I can't live without you</div>
                            <div class="lyrics-line opacity-60">It takes me all the way</div>
                            <div class="lyrics-line opacity-60">I want you to stay</div>
                            <div class="lyrics-line opacity-60">I'm running out of time</div>
                            <div class="lyrics-line opacity-60">'Cause I can see the sun light up the sky</div>
                            <div class="lyrics-line opacity-60">So I hit the road in overdrive, baby, oh</div>
                            <div class="lyrics-line opacity-60">The city's cold and empty (Oh)</div>
                            <div class="lyrics-line opacity-60">No one's around to judge me (Oh)</div>
                            <div class="lyrics-line opacity-60">I can't see clearly when you're gone</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Player (Hidden on Landing Page) -->
    <div id="bottomPlayer" class="fixed bottom-0 left-0 right-0 bg-dark border-t border-gray-800 p-4 z-40 bottom-player hidden">
        <div class="flex items-center justify-between">
            <!-- Now Playing -->
            <div class="flex items-center space-x-4 w-1/4">
                <div class="w-14 h-14 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center">
                    <span class="text-xl">üéµ</span>
                </div>
                <div>
                    <h4 class="font-semibold text-sm">Song Title</h4>
                    <p class="text-xs text-gray-400">Artist Name</p>
                </div>
                <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                </button>
            </div>

            <!-- Player Controls -->
            <div class="flex flex-col items-center w-1/2">
                <div class="flex items-center space-x-4 mb-2">
                    <button id="shuffleButton" class="p-2 hover:bg-gray-800 rounded-full transition-colors" title="Shuffle">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7 7h10v3l4-4-4-4v3H5v6h2V7z"/>
                        </svg>
                    </button>
                    <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                        </svg>
                    </button>
                    <button class="p-3 bg-white text-black rounded-full hover:scale-105 transition-transform playing-animation">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                    <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                        </svg>
                    </button>
                    <button id="repeatButton" class="p-2 hover:bg-gray-800 rounded-full transition-colors" title="Repeat">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                        </svg>
                    </button>
                </div>
                <div class="flex items-center space-x-2 w-full max-w-md">
                    <span class="text-xs text-gray-400">1:23</span>
                    <div class="flex-1 bg-gray-700 rounded-full h-1 cursor-pointer hover:h-2 transition-all group">
                        <div class="bg-white rounded-full h-1 w-1/3 group-hover:h-2 transition-all relative">
                            <div class="absolute right-0 top-1/2 transform -translate-y-1/2 w-2 h-2 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"></div>
                        </div>
                    </div>
                    <span class="text-xs text-gray-400">3:45</span>
                </div>
            </div>

            <!-- Volume & Options -->
            <div class="flex items-center space-x-4 w-1/4 justify-end">
                <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                </button>
                <button id="lyricsButton" class="p-2 hover:bg-gray-800 rounded-full transition-colors" title="Show Lyrics">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </button>
                <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                </button>
                <div class="flex items-center space-x-2">
                    <div class="w-20 bg-gray-700 rounded-full h-1">
                        <div class="bg-white rounded-full h-1 w-2/3"></div>
                    </div>
                </div>
                <button class="p-2 hover:bg-gray-800 rounded-full transition-colors">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample music data
        const playlistData = {
            likedSongs: [
                { title: "Blinding Lights", artist: "The Weeknd", album: "After Hours", duration: "3:20", emoji: "üåü", dateAdded: "5 days ago" },
                { title: "Shape of You", artist: "Ed Sheeran", album: "√∑ (Divide)", duration: "3:53", emoji: "üí´", dateAdded: "1 week ago" },
                { title: "Someone Like You", artist: "Adele", album: "21", duration: "4:45", emoji: "üíî", dateAdded: "2 weeks ago" },
                { title: "Bohemian Rhapsody", artist: "Queen", album: "A Night at the Opera", duration: "5:55", emoji: "üëë", dateAdded: "3 weeks ago" },
                { title: "Hotel California", artist: "Eagles", album: "Hotel California", duration: "6:30", emoji: "ü¶Ö", dateAdded: "1 month ago" }
            ],
            recentlyPlayed: [
                { title: "Billie Jean", artist: "Michael Jackson", album: "Thriller", duration: "4:54", emoji: "üï∫", playedTime: "2 hours ago" },
                { title: "Imagine", artist: "John Lennon", album: "Imagine", duration: "3:03", emoji: "üïäÔ∏è", playedTime: "5 hours ago" },
                { title: "Smells Like Teen Spirit", artist: "Nirvana", album: "Nevermind", duration: "5:01", emoji: "üé∏", playedTime: "Yesterday" },
                { title: "Stairway to Heaven", artist: "Led Zeppelin", album: "Led Zeppelin IV", duration: "8:02", emoji: "ü™ú", playedTime: "2 days ago" }
            ],
            yourPlaylist: [
                { title: "Watermelon Sugar", artist: "Harry Styles", album: "Fine Line", duration: "2:54", emoji: "üçâ", dateAdded: "3 days ago" },
                { title: "Levitating", artist: "Dua Lipa", album: "Future Nostalgia", duration: "3:23", emoji: "‚ú®", dateAdded: "1 week ago" },
                { title: "Good 4 U", artist: "Olivia Rodrigo", album: "SOUR", duration: "2:58", emoji: "üò§", dateAdded: "2 weeks ago" }
            ]
        };

        const musicData = {
            songs: [
                { title: "Blinding Lights", artist: "The Weeknd", album: "After Hours", duration: "3:20", emoji: "üåü" },
                { title: "Shape of You", artist: "Ed Sheeran", album: "√∑ (Divide)", duration: "3:53", emoji: "üí´" },
                { title: "Someone Like You", artist: "Adele", album: "21", duration: "4:45", emoji: "üíî" },
                { title: "Bohemian Rhapsody", artist: "Queen", album: "A Night at the Opera", duration: "5:55", emoji: "üëë" },
                { title: "Billie Jean", artist: "Michael Jackson", album: "Thriller", duration: "4:54", emoji: "üï∫" },
                { title: "Hotel California", artist: "Eagles", album: "Hotel California", duration: "6:30", emoji: "ü¶Ö" },
                { title: "Imagine", artist: "John Lennon", album: "Imagine", duration: "3:03", emoji: "üïäÔ∏è" },
                { title: "Smells Like Teen Spirit", artist: "Nirvana", album: "Nevermind", duration: "5:01", emoji: "üé∏" }
            ],
            artists: [
                { name: "The Weeknd", followers: "85M", emoji: "üåü" },
                { name: "Ed Sheeran", followers: "78M", emoji: "üéµ" },
                { name: "Adele", followers: "65M", emoji: "üé§" },
                { name: "Queen", followers: "45M", emoji: "üëë" },
                { name: "Michael Jackson", followers: "92M", emoji: "üï∫" }
            ],
            albums: [
                { title: "After Hours", artist: "The Weeknd", year: "2020", emoji: "üåô" },
                { title: "√∑ (Divide)", artist: "Ed Sheeran", year: "2017", emoji: "‚ûó" },
                { title: "21", artist: "Adele", year: "2011", emoji: "üíù" },
                { title: "Thriller", artist: "Michael Jackson", year: "1982", emoji: "üßü" },
                { title: "Abbey Road", artist: "The Beatles", year: "1969", emoji: "üö∂" }
            ]
        };

        // Page transition functionality
        function showMainApp() {
            const landingPage = document.getElementById('landingPage');
            const mainApp = document.getElementById('mainApp');
            
            // Add fade out animation to landing page
            landingPage.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
            landingPage.style.opacity = '0';
            landingPage.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                landingPage.classList.add('hidden');
                mainApp.classList.remove('hidden');
                
                // Add fade in animation to main app
                mainApp.style.opacity = '0';
                mainApp.style.transform = 'scale(1.05)';
                mainApp.style.transition = 'opacity 0.5s ease-in, transform 0.5s ease-in';
                
                setTimeout(() => {
                    mainApp.style.opacity = '1';
                    mainApp.style.transform = 'scale(1)';
                }, 50);
                
                // Show welcome notification and bottom player
                setTimeout(() => {
                    showNotification('Welcome to MusicPioneer! üéµ', 'üéâ');
                    document.getElementById('bottomPlayer').classList.remove('hidden');
                }, 800);
            }, 500);
        }
        
        // Landing page button functionality
        document.getElementById('getStartedBtn').addEventListener('click', function() {
            // Add button click animation
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    showMainApp();
                }, 100);
            }, 100);
        });
        
        document.getElementById('learnMoreBtn').addEventListener('click', function() {
            // Add button click animation
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 100);
            
            // Smooth scroll to features section
            const featuresSection = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-3');
            if (featuresSection) {
                featuresSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Highlight features with animation
                const featureCards = featuresSection.querySelectorAll('.glass-effect');
                featureCards.forEach((card, index) => {
                    setTimeout(() => {
                        card.style.transform = 'scale(1.1)';
                        card.style.boxShadow = '0 20px 40px rgba(139, 92, 246, 0.3)';
                        card.style.borderColor = '#8B5CF6';
                        card.style.borderWidth = '2px';
                        setTimeout(() => {
                            card.style.transform = 'scale(1.05)';
                            card.style.boxShadow = '';
                            card.style.borderColor = '';
                            card.style.borderWidth = '';
                        }, 800);
                    }, index * 300);
                });
                
                // Show additional info popup
                setTimeout(() => {
                    showLearnMoreModal();
                }, 1500);
            }
        });
        
        // Learn More Modal
        function showLearnMoreModal() {
            // Remove existing modal if any
            const existingModal = document.querySelector('.learn-more-modal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Create modal
            const modal = document.createElement('div');
            modal.className = 'learn-more-modal fixed inset-0 bg-black/50 flex items-center justify-center z-50 fade-in-up';
            modal.innerHTML = `
                <div class="bg-gray-900 rounded-2xl p-8 max-w-2xl mx-4 relative overflow-hidden">
                    <!-- Background decoration -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/20 to-transparent rounded-full -translate-y-16 translate-x-16"></div>
                    <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-secondary/20 to-transparent rounded-full translate-y-12 -translate-x-12"></div>
                    
                    <div class="relative z-10">
                        <!-- Header -->
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-xl flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-white">Why Choose MusicPioneer?</h3>
                            </div>
                            <button class="close-modal p-2 hover:bg-gray-800 rounded-full transition-colors">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Content -->
                        <div class="space-y-6">
                            <!-- Feature highlights -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-gray-800/50 rounded-lg p-4">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="text-2xl">üéµ</span>
                                        <h4 class="font-semibold text-white">50M+ Songs</h4>
                                    </div>
                                    <p class="text-sm text-gray-300">Access the world's largest music library with songs from every genre and era.</p>
                                </div>
                                
                                <div class="bg-gray-800/50 rounded-lg p-4">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="text-2xl">üéß</span>
                                        <h4 class="font-semibold text-white">Lossless Quality</h4>
                                    </div>
                                    <p class="text-sm text-gray-300">Experience studio-quality sound with our advanced audio streaming technology.</p>
                                </div>
                                
                                <div class="bg-gray-800/50 rounded-lg p-4">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="text-2xl">ü§ñ</span>
                                        <h4 class="font-semibold text-white">AI Recommendations</h4>
                                    </div>
                                    <p class="text-sm text-gray-300">Discover new music tailored to your taste with our intelligent recommendation engine.</p>
                                </div>
                                
                                <div class="bg-gray-800/50 rounded-lg p-4">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <span class="text-2xl">üì±</span>
                                        <h4 class="font-semibold text-white">Offline Mode</h4>
                                    </div>
                                    <p class="text-sm text-gray-300">Download your favorite songs and listen anywhere, even without internet connection.</p>
                                </div>
                            </div>
                            
                            <!-- Pricing info -->
                            <div class="bg-gradient-to-r from-primary/20 to-secondary/20 rounded-lg p-6 border border-primary/30">
                                <h4 class="text-lg font-semibold text-white mb-2">üéâ Special Launch Offer</h4>
                                <p class="text-gray-300 mb-4">Get your first 3 months absolutely free! No credit card required.</p>
                                <div class="flex items-center space-x-4">
                                    <span class="text-2xl font-bold text-primary">$0</span>
                                    <span class="text-sm text-gray-400 line-through">$9.99/month</span>
                                    <span class="bg-accent text-black px-2 py-1 rounded-full text-xs font-bold">LIMITED TIME</span>
                                </div>
                            </div>
                            
                            <!-- CTA -->
                            <div class="flex space-x-4 pt-4">
                                <button class="get-started-modal bg-gradient-to-r from-primary to-secondary hover:from-secondary hover:to-primary text-white font-bold py-3 px-8 rounded-full transition-all duration-300 hover:scale-105 flex-1">
                                    Start Free Trial
                                </button>
                                <button class="close-modal border-2 border-gray-600 text-gray-300 hover:border-gray-400 hover:text-white font-semibold py-3 px-6 rounded-full transition-all duration-300">
                                    Maybe Later
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add event listeners
            modal.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', () => {
                    modal.style.opacity = '0';
                    modal.style.transform = 'scale(0.95)';
                    setTimeout(() => modal.remove(), 300);
                });
            });
            
            modal.querySelector('.get-started-modal').addEventListener('click', () => {
                modal.remove();
                document.getElementById('getStartedBtn').click();
            });
            
            // Close on backdrop click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.querySelector('.close-modal').click();
                }
            });
        }

        // Simple interactivity
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation between views
            const homeContent = document.getElementById('homeContent');
            const homeOnlyContent = document.getElementById('homeOnlyContent');
            const searchContent = document.getElementById('searchContent');
            const searchResults = document.getElementById('searchResults');
            const browseCategories = document.getElementById('browseCategories');
            const libraryContent = document.getElementById('libraryContent');
            const recentlyPlayedSection = document.getElementById('recentlyPlayedSection');
            const mainSearchInput = document.getElementById('mainSearchInput');
            const nowPlayingInterface = document.getElementById('nowPlayingInterface');
            
            let currentSong = null;

            // Show search page
            function showSearchPage() {
                homeContent.classList.add('hidden');
                homeOnlyContent.classList.add('hidden');
                libraryContent.classList.add('hidden');
                recentlyPlayedSection.classList.add('hidden');
                searchContent.classList.remove('hidden');
                searchResults.classList.add('hidden');
                browseCategories.classList.remove('hidden');
            }

            // Show home page
            function showHomePage() {
                homeContent.classList.remove('hidden');
                homeOnlyContent.classList.remove('hidden');
                recentlyPlayedSection.classList.remove('hidden');
                searchContent.classList.add('hidden');
                libraryContent.classList.add('hidden');
            }

            // Show library page
            function showLibraryPage() {
                hideAllContent();
                libraryContent.classList.remove('hidden');
            }

            // Show liked songs page
            function showLikedSongsPage() {
                hideAllContent();
                document.getElementById('likedSongsContent').classList.remove('hidden');
                populateLikedSongs();
            }

            // Show recently played page
            function showRecentlyPlayedPage() {
                hideAllContent();
                document.getElementById('recentlyPlayedContent').classList.remove('hidden');
                populateRecentlyPlayed();
            }

            // Show your playlist page
            function showYourPlaylistPage() {
                hideAllContent();
                document.getElementById('yourPlaylistContent').classList.remove('hidden');
                populateYourPlaylist();
            }

            // Hide all content sections
            function hideAllContent() {
                homeContent.classList.add('hidden');
                homeOnlyContent.classList.add('hidden');
                searchContent.classList.add('hidden');
                recentlyPlayedSection.classList.add('hidden');
                libraryContent.classList.add('hidden');
                document.getElementById('likedSongsContent').classList.add('hidden');
                document.getElementById('recentlyPlayedContent').classList.add('hidden');
                document.getElementById('yourPlaylistContent').classList.add('hidden');
                document.getElementById('accountContent').classList.add('hidden');
                document.getElementById('profileContent').classList.add('hidden');
                document.getElementById('settingsContent').classList.add('hidden');
            }

            // Show now playing interface
            function showNowPlaying(song) {
                currentSong = song;
                currentSongIndex = currentQueue.findIndex(s => s.title === song.title);
                if (currentSongIndex === -1) {
                    currentSongIndex = 0;
                }
                
                nowPlayingInterface.classList.remove('hidden');
                
                // Update now playing info
                document.getElementById('nowPlayingTitle').textContent = song.title;
                document.getElementById('nowPlayingArtist').textContent = song.artist;
                document.getElementById('discEmoji').textContent = song.emoji;
                
                // Update bottom player info
                const bottomPlayerTitle = document.querySelector('.bottom-player h4');
                const bottomPlayerArtist = document.querySelector('.bottom-player p');
                const bottomPlayerEmoji = document.querySelector('.bottom-player .text-xl');
                
                if (bottomPlayerTitle) bottomPlayerTitle.textContent = song.title;
                if (bottomPlayerArtist) bottomPlayerArtist.textContent = song.artist;
                if (bottomPlayerEmoji) bottomPlayerEmoji.textContent = song.emoji;
                
                // Update total duration based on song
                const durationParts = song.duration.split(':');
                totalDuration = parseInt(durationParts[0]) * 60 + parseInt(durationParts[1]);
                document.getElementById('totalTime').textContent = song.duration;
                
                // Update bottom player duration
                const bottomDuration = document.querySelector('.bottom-player .text-xs:last-child');
                if (bottomDuration) bottomDuration.textContent = song.duration;
                
                // Reset progress to beginning
                currentProgress = 0;
                updateProgressDisplay(0);
                
                // Update queue
                updateQueue();
                
                // Update button states
                updatePlayButtonStates();
                updateLikeButtonState();
                updateShuffleState();
                updateRepeatState();
                
                // Start playing automatically
                isPlaying = true;
                updatePlayButtonStates();
                startProgressSimulation();
                
                // Show notification
                showNotification(`Now playing: ${song.title}`, song.emoji);
            }

            // Close now playing interface
            function closeNowPlaying() {
                nowPlayingInterface.classList.add('hidden');
                const disc = document.getElementById('albumDisc');
                disc.classList.remove('spinning-disc');
            }

            // Populate liked songs
            function populateLikedSongs() {
                const likedSongsList = document.getElementById('likedSongsList');
                likedSongsList.innerHTML = playlistData.likedSongs.map((song, index) => `
                    <div class="grid grid-cols-12 gap-4 px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer group">
                        <div class="col-span-1 flex items-center">
                            <span class="text-gray-400 group-hover:hidden">${index + 1}</span>
                            <button class="hidden group-hover:block p-1 hover:bg-gray-700 rounded-full" onclick="showNowPlaying({title: '${song.title}', artist: '${song.artist}', emoji: '${song.emoji}'})">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="col-span-5 flex items-center space-x-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded flex items-center justify-center text-sm">
                                ${song.emoji}
                            </div>
                            <div>
                                <h4 class="font-semibold text-sm">${song.title}</h4>
                                <p class="text-xs text-gray-400">${song.artist}</p>
                            </div>
                        </div>
                        <div class="col-span-3 flex items-center">
                            <span class="text-sm text-gray-400">${song.album}</span>
                        </div>
                        <div class="col-span-2 flex items-center">
                            <span class="text-sm text-gray-400">${song.dateAdded}</span>
                        </div>
                        <div class="col-span-1 flex items-center justify-between">
                            <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 hover:bg-gray-700 rounded-full" title="Add to Playlist">
                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"/>
                                    </svg>
                                </button>
                                <button class="p-1 hover:bg-gray-700 rounded-full" title="Download">
                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                    </svg>
                                </button>
                            </div>
                            <span class="text-sm text-gray-400">${song.duration}</span>
                        </div>
                    </div>
                `).join('');
            }

            // Populate recently played
            function populateRecentlyPlayed() {
                const recentlyPlayedList = document.getElementById('recentlyPlayedList');
                recentlyPlayedList.innerHTML = playlistData.recentlyPlayed.map((song, index) => `
                    <div class="grid grid-cols-12 gap-4 px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer group">
                        <div class="col-span-1 flex items-center">
                            <span class="text-gray-400 group-hover:hidden">${index + 1}</span>
                            <button class="hidden group-hover:block p-1 hover:bg-gray-700 rounded-full" onclick="showNowPlaying({title: '${song.title}', artist: '${song.artist}', emoji: '${song.emoji}'})">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="col-span-5 flex items-center space-x-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded flex items-center justify-center text-sm">
                                ${song.emoji}
                            </div>
                            <div>
                                <h4 class="font-semibold text-sm">${song.title}</h4>
                                <p class="text-xs text-gray-400">${song.artist}</p>
                            </div>
                        </div>
                        <div class="col-span-3 flex items-center">
                            <span class="text-sm text-gray-400">${song.album}</span>
                        </div>
                        <div class="col-span-2 flex items-center">
                            <span class="text-sm text-gray-400">${song.playedTime}</span>
                        </div>
                        <div class="col-span-1 flex items-center justify-between">
                            <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 hover:bg-gray-700 rounded-full" title="Like">
                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                </button>
                                <button class="p-1 hover:bg-gray-700 rounded-full" title="Download">
                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                    </svg>
                                </button>
                            </div>
                            <span class="text-sm text-gray-400">${song.duration}</span>
                        </div>
                    </div>
                `).join('');
            }

            // Populate your playlist
            function populateYourPlaylist() {
                const yourPlaylistList = document.getElementById('yourPlaylistList');
                yourPlaylistList.innerHTML = playlistData.yourPlaylist.map((song, index) => `
                    <div class="grid grid-cols-12 gap-4 px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer group">
                        <div class="col-span-1 flex items-center">
                            <span class="text-gray-400 group-hover:hidden">${index + 1}</span>
                            <button class="hidden group-hover:block p-1 hover:bg-gray-700 rounded-full" onclick="showNowPlaying({title: '${song.title}', artist: '${song.artist}', emoji: '${song.emoji}'})">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="col-span-5 flex items-center space-x-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded flex items-center justify-center text-sm">
                                ${song.emoji}
                            </div>
                            <div>
                                <h4 class="font-semibold text-sm">${song.title}</h4>
                                <p class="text-xs text-gray-400">${song.artist}</p>
                            </div>
                        </div>
                        <div class="col-span-3 flex items-center">
                            <span class="text-sm text-gray-400">${song.album}</span>
                        </div>
                        <div class="col-span-2 flex items-center">
                            <span class="text-sm text-gray-400">${song.dateAdded}</span>
                        </div>
                        <div class="col-span-1 flex items-center justify-between">
                            <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="p-1 hover:bg-gray-700 rounded-full" title="Like">
                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                </button>
                                <button class="p-1 hover:bg-gray-700 rounded-full" title="Download">
                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                    </svg>
                                </button>
                            </div>
                            <span class="text-sm text-gray-400">${song.duration}</span>
                        </div>
                    </div>
                `).join('');
            }

            // Play button state management
            function updatePlayButtonStates() {
                const playButtons = document.querySelectorAll('#mainPlayPause, .playing-animation');
                
                playButtons.forEach(button => {
                    const svg = button.querySelector('svg path');
                    if (isPlaying) {
                        // Show pause icon
                        svg.setAttribute('d', 'M6 19h4V5H6v14zm8-14v14h4V5h-4z');
                        if (button.classList.contains('playing-animation')) {
                            button.classList.add('playing-animation');
                        }
                    } else {
                        // Show play icon
                        svg.setAttribute('d', 'M8 5v14l11-7z');
                        if (button.classList.contains('playing-animation')) {
                            button.classList.remove('playing-animation');
                        }
                    }
                });
                
                // Update disc spinning
                const disc = document.getElementById('albumDisc');
                if (disc) {
                    if (isPlaying) {
                        disc.classList.add('spinning-disc');
                    } else {
                        disc.classList.remove('spinning-disc');
                    }
                }
            }

            // Update queue with remaining songs
            function updateQueue() {
                const queueList = document.getElementById('queueList');
                if (!currentSong) return;
                
                // Show next songs in queue
                const nextSongs = currentQueue.slice(currentSongIndex + 1);
                
                queueList.innerHTML = nextSongs.slice(0, 8).map((song, index) => `
                    <div class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer" onclick="playQueueSong(${currentSongIndex + 1 + index})">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded flex items-center justify-center text-sm">
                            ${song.emoji}
                        </div>
                        <div class="flex-1">
                            <h5 class="font-semibold text-sm">${song.title}</h5>
                            <p class="text-xs text-gray-400">${song.artist}</p>
                        </div>
                        <span class="text-xs text-gray-400">${song.duration}</span>
                    </div>
                `).join('');
            }
            
            // Play song from queue
            function playQueueSong(index) {
                currentSongIndex = index;
                const song = currentQueue[index];
                showNowPlaying(song);
            }
            
            // Make function globally accessible
            window.playQueueSong = playQueueSong;

            // Perform search
            function performSearch(query) {
                if (!query.trim()) {
                    searchResults.classList.add('hidden');
                    browseCategories.classList.remove('hidden');
                    return;
                }

                browseCategories.classList.add('hidden');
                searchResults.classList.remove('hidden');

                // Filter results based on query
                const filteredSongs = musicData.songs.filter(song => 
                    song.title.toLowerCase().includes(query.toLowerCase()) ||
                    song.artist.toLowerCase().includes(query.toLowerCase()) ||
                    song.album.toLowerCase().includes(query.toLowerCase())
                );

                const filteredArtists = musicData.artists.filter(artist =>
                    artist.name.toLowerCase().includes(query.toLowerCase())
                );

                const filteredAlbums = musicData.albums.filter(album =>
                    album.title.toLowerCase().includes(query.toLowerCase()) ||
                    album.artist.toLowerCase().includes(query.toLowerCase())
                );

                // Display top result
                if (filteredSongs.length > 0) {
                    const topSong = filteredSongs[0];
                    document.getElementById('topResult').innerHTML = `
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center text-3xl">
                                ${topSong.emoji}
                            </div>
                            <div>
                                <h4 class="text-2xl font-bold mb-1">${topSong.title}</h4>
                                <p class="text-gray-400">Song ‚Ä¢ ${topSong.artist}</p>
                                <div class="flex items-center mt-2">
                                    <button class="bg-primary hover:bg-secondary text-white rounded-full p-3 mr-4">
                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                    <span class="text-sm text-gray-400">${topSong.duration}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }

                // Display song results with new buttons
                document.getElementById('songResults').innerHTML = filteredSongs.slice(0, 5).map((song, index) => `
                    <div class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer group">
                        <div class="flex items-center space-x-4">
                            <span class="text-gray-400 w-4">${index + 1}</span>
                            <div class="w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded flex items-center justify-center text-lg">
                                ${song.emoji}
                            </div>
                            <div>
                                <h4 class="font-semibold">${song.title}</h4>
                                <p class="text-sm text-gray-400">${song.artist}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="p-2 hover:bg-gray-700 rounded-full transition-colors" title="Like">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                            </button>
                            <button class="p-2 hover:bg-gray-700 rounded-full transition-colors" title="Add to Playlist">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"/>
                                </svg>
                            </button>
                            <button class="p-2 hover:bg-gray-700 rounded-full transition-colors" title="Download">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                </svg>
                            </button>
                            <span class="text-sm text-gray-400">${song.duration}</span>
                            <button class="p-2 hover:bg-gray-700 rounded-full transition-colors" onclick="showNowPlaying(musicData.songs.find(s => s.title === '${song.title}'))">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');

                // Display artist results
                document.getElementById('artistResults').innerHTML = filteredArtists.slice(0, 5).map(artist => `
                    <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                        <div class="w-full h-32 bg-gradient-to-br from-primary to-secondary rounded-full mb-4 flex items-center justify-center text-4xl">
                            ${artist.emoji}
                        </div>
                        <h4 class="font-semibold mb-1">${artist.name}</h4>
                        <p class="text-sm text-gray-400">Artist ‚Ä¢ ${artist.followers} followers</p>
                    </div>
                `).join('');

                // Display album results
                document.getElementById('albumResults').innerHTML = filteredAlbums.slice(0, 5).map(album => `
                    <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors cursor-pointer hover-scale">
                        <div class="w-full h-32 bg-gradient-to-br from-primary to-secondary rounded-lg mb-4 flex items-center justify-center text-3xl">
                            ${album.emoji}
                        </div>
                        <h4 class="font-semibold mb-1">${album.title}</h4>
                        <p class="text-sm text-gray-400">${album.year} ‚Ä¢ ${album.artist}</p>
                    </div>
                `).join('');
            }

            // Play/Pause functionality
            const playButton = document.querySelector('.playing-animation');
            
            playButton.addEventListener('click', function() {
                const icon = this.querySelector('svg path');
                if (isPlaying) {
                    // Pause
                    icon.setAttribute('d', 'M6 19h4V5H6v14zm8-14v14h4V5h-4z');
                    this.classList.remove('playing-animation');
                    stopProgressSimulation();
                } else {
                    // Play
                    icon.setAttribute('d', 'M8 5v14l11-7z');
                    this.classList.add('playing-animation');
                    startProgressSimulation();
                }
                isPlaying = !isPlaying;
            });

            // Main search input functionality
            mainSearchInput.addEventListener('input', function() {
                performSearch(this.value);
            });

            // Sidebar navigation
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach((link, index) => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    navLinks.forEach(l => l.classList.remove('bg-primary', 'text-white'));
                    this.classList.add('bg-primary', 'text-white');
                    
                    // Show appropriate content based on navigation
                    if (index === 0) { // Home
                        showHomePage();
                    } else if (index === 1) { // Search
                        showSearchPage();
                        mainSearchInput.focus();
                    } else if (index === 2) { // Library
                        showLibraryPage();
                    }
                });
            });

            // Close now playing interface
            document.getElementById('closeNowPlaying').addEventListener('click', closeNowPlaying);

            // Show account page
            function showAccountPage() {
                hideAllContent();
                document.getElementById('accountContent').classList.remove('hidden');
            }

            // Show profile page
            function showProfilePage() {
                hideAllContent();
                document.getElementById('profileContent').classList.remove('hidden');
            }

            // Show settings page
            function showSettingsPage() {
                hideAllContent();
                document.getElementById('settingsContent').classList.remove('hidden');
            }

            // Logout function
            function logout() {
                if (confirm('Are you sure you want to log out?')) {
                    alert('You have been logged out successfully!');
                    // In a real app, this would redirect to login page
                    showHomePage();
                }
            }

            // User menu functionality
            const userMenuButton = document.getElementById('userMenuButton');
            const userDropdown = document.getElementById('userDropdown');
            
            userMenuButton.addEventListener('click', function(e) {
                e.stopPropagation();
                userDropdown.classList.toggle('hidden');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                userDropdown.classList.add('hidden');
            });

            // User dropdown menu items
            document.querySelectorAll('#userDropdown a').forEach((link, index) => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    userDropdown.classList.add('hidden');
                    
                    const text = this.textContent.trim();
                    if (text === 'Account') {
                        showAccountPage();
                    } else if (text === 'Profile') {
                        showProfilePage();
                    } else if (text === 'Settings') {
                        showSettingsPage();
                    } else if (text === 'Log out') {
                        logout();
                    }
                });
            });

            // Playlist navigation
            document.getElementById('likedSongsLink').addEventListener('click', function(e) {
                e.preventDefault();
                showLikedSongsPage();
            });

            document.getElementById('recentlyPlayedLink').addEventListener('click', function(e) {
                e.preventDefault();
                showRecentlyPlayedPage();
            });

            document.getElementById('yourPlaylistLink').addEventListener('click', function(e) {
                e.preventDefault();
                showYourPlaylistPage();
            });

            // Add click handlers for play buttons in World's Top Hits
            document.querySelectorAll('#homeOnlyContent .hover-scale').forEach((songElement, index) => {
                const playButton = songElement.querySelector('button:last-child');
                if (playButton) {
                    playButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const song = musicData.songs[index];
                        showNowPlaying(song);
                    });
                }
            });

            // Main play/pause functionality
            function togglePlayPause() {
                isPlaying = !isPlaying;
                
                if (isPlaying) {
                    startProgressSimulation();
                    console.log('Playing');
                } else {
                    stopProgressSimulation();
                    console.log('Paused');
                }
                
                updatePlayButtonStates();
            }

            // Main play/pause in now playing interface
            document.getElementById('mainPlayPause').addEventListener('click', togglePlayPause);

            // Volume control
            const volumeBar = document.querySelector('.w-20');
            volumeBar.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                const volumeIndicator = this.querySelector('div');
                volumeIndicator.style.width = `${percent * 100}%`;
            });

            // Progress bar
            const progressBar = document.querySelector('.max-w-md .bg-gray-700');
            progressBar.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                const progressIndicator = this.querySelector('div');
                progressIndicator.style.width = `${percent * 100}%`;
                
                // Update time display
                const totalTime = 225; // 3:45 in seconds
                const currentTime = Math.floor(totalTime * percent);
                const minutes = Math.floor(currentTime / 60);
                const seconds = currentTime % 60;
                const timeDisplay = document.querySelector('.text-xs.text-gray-400');
                timeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            });

            // Download and playlist functionality
            function downloadSong(songTitle = null) {
                const song = songTitle || (currentSong ? currentSong.title : 'Unknown Song');
                showNotification(`Downloading ${song}...`, '‚¨áÔ∏è');
                
                // Simulate download progress
                setTimeout(() => {
                    showNotification(`${song} downloaded!`, '‚úÖ');
                }, 2000);
                
                console.log(`Download started for: ${song}`);
            }
            
            function addToPlaylist(songTitle = null) {
                const song = songTitle || (currentSong ? currentSong.title : 'Unknown Song');
                
                // Create a simple playlist selection modal
                const playlists = ['Liked Songs', 'Your Own Playlist', 'Recently Played', 'Road Trip Vibes', 'Workout Mix'];
                const playlistName = playlists[Math.floor(Math.random() * playlists.length)];
                
                showNotification(`Added ${song} to ${playlistName}`, '‚ûï');
                console.log(`Added ${song} to playlist: ${playlistName}`);
            }

            // Add functionality to download and playlist buttons
            document.addEventListener('click', function(e) {
                if (e.target.closest('button[title="Download"]')) {
                    e.stopPropagation();
                    downloadSong();
                }
                
                if (e.target.closest('button[title="Add to Playlist"]')) {
                    e.stopPropagation();
                    addToPlaylist();
                }
            });

            // Form functionality for profile and settings
            document.addEventListener('click', function(e) {
                // Profile save functionality
                if (e.target.textContent === 'Save Changes' && e.target.closest('#profileContent')) {
                    e.preventDefault();
                    const displayName = document.querySelector('#profileContent input[value="Music Pioneer"]').value;
                    const username = document.querySelector('#profileContent input[value="musicpioneer2024"]').value;
                    const bio = document.querySelector('#profileContent textarea').value;
                    
                    alert(`Profile updated successfully!\nDisplay Name: ${displayName}\nUsername: ${username}\nBio: ${bio}`);
                }
                
                // Settings save functionality
                if (e.target.textContent === 'Save All Settings' && e.target.closest('#settingsContent')) {
                    e.preventDefault();
                    alert('All settings have been saved successfully!');
                }
                
                // Privacy settings button
                if (e.target.textContent === 'Privacy Settings') {
                    e.preventDefault();
                    showSettingsPage();
                }
                
                // Choose photo button
                if (e.target.textContent === 'Choose Photo') {
                    e.preventDefault();
                    alert('Photo upload feature would open file picker here!');
                }
                
                // Cancel button
                if (e.target.textContent === 'Cancel' && e.target.closest('#profileContent')) {
                    e.preventDefault();
                    if (confirm('Are you sure you want to cancel? Any unsaved changes will be lost.')) {
                        showAccountPage();
                    }
                }
            });

            // Toggle switches functionality
            document.addEventListener('change', function(e) {
                if (e.target.type === 'checkbox' && e.target.closest('.peer')) {
                    const label = e.target.closest('.flex').querySelector('h4');
                    const setting = label ? label.textContent : 'Setting';
                    const status = e.target.checked ? 'enabled' : 'disabled';
                    console.log(`${setting} has been ${status}`);
                }
            });

            // Range slider functionality
            document.addEventListener('input', function(e) {
                if (e.target.type === 'range') {
                    const value = e.target.value;
                    console.log(`Volume set to ${value}%`);
                }
            });

            // Logo click functionality - redirect to home
            document.getElementById('logoButton').addEventListener('click', function() {
                // Reset navigation to home
                navLinks.forEach(l => l.classList.remove('bg-primary', 'text-white'));
                navLinks[0].classList.add('bg-primary', 'text-white'); // Highlight Home
                showHomePage();
            });

            // Music control functionality
            let isShuffled = false;
            let repeatMode = 0; // 0: off, 1: repeat all, 2: repeat one
            let currentVolume = 67; // Default volume
            let isLiked = false;
            let isMuted = false;
            let previousVolume = 67;
            let currentQueue = [...musicData.songs];
            let originalQueue = [...musicData.songs];
            let currentSongIndex = 0;

            // Shuffle functionality
            function shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }

            function updateShuffleState() {
                const shuffleButtons = document.querySelectorAll('[title="Shuffle"], #shuffleButton');
                shuffleButtons.forEach(button => {
                    if (isShuffled) {
                        button.classList.add('text-primary');
                        button.style.color = '#8B5CF6';
                    } else {
                        button.classList.remove('text-primary');
                        button.style.color = '';
                    }
                });
            }

            // Shuffle button
            document.getElementById('shuffleButton').addEventListener('click', function() {
                isShuffled = !isShuffled;
                
                if (isShuffled) {
                    // Shuffle the queue but keep current song at the front
                    const currentSongData = currentSong;
                    const remainingSongs = currentQueue.filter(song => song.title !== currentSongData.title);
                    const shuffledRemaining = shuffleArray(remainingSongs);
                    currentQueue = [currentSongData, ...shuffledRemaining];
                    currentSongIndex = 0;
                    console.log('Shuffle ON - Queue shuffled');
                } else {
                    // Restore original order
                    currentQueue = [...originalQueue];
                    currentSongIndex = originalQueue.findIndex(song => song.title === currentSong.title);
                    console.log('Shuffle OFF - Original order restored');
                }
                
                updateShuffleState();
                updateQueue();
            });

            // Repeat functionality
            function updateRepeatState() {
                const repeatButtons = document.querySelectorAll('[title="Repeat"], #repeatButton');
                repeatButtons.forEach(button => {
                    const svg = button.querySelector('svg path');
                    
                    if (repeatMode === 0) {
                        // Repeat off
                        button.classList.remove('text-primary');
                        button.style.color = '';
                        svg.setAttribute('d', 'M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z');
                    } else if (repeatMode === 1) {
                        // Repeat all
                        button.classList.add('text-primary');
                        button.style.color = '#8B5CF6';
                        svg.setAttribute('d', 'M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z');
                    } else {
                        // Repeat one
                        button.classList.add('text-primary');
                        button.style.color = '#8B5CF6';
                        svg.setAttribute('d', 'M7 7h10v3l4-4-4-4v3H5v6h2V7zm5 3v8l4-4-4-4z');
                    }
                });
            }

            // Repeat button
            document.getElementById('repeatButton').addEventListener('click', function() {
                repeatMode = (repeatMode + 1) % 3;
                
                const modes = ['OFF', 'ALL', 'ONE'];
                console.log(`Repeat ${modes[repeatMode]}`);
                
                updateRepeatState();
            });

            // Navigation functions
            function playPreviousSong() {
                if (!currentSong) return;
                
                // If we're more than 3 seconds into the song, restart current song
                if (currentProgress > 0.05) {
                    currentProgress = 0;
                    updateProgressDisplay(0);
                    console.log(`Restarting: ${currentSong.title}`);
                    return;
                }
                
                // Otherwise, go to previous song
                if (repeatMode === 2) {
                    // Repeat one - restart current song
                    currentProgress = 0;
                    updateProgressDisplay(0);
                    console.log(`Repeating: ${currentSong.title}`);
                    return;
                }
                
                currentSongIndex = currentSongIndex > 0 ? currentSongIndex - 1 : currentQueue.length - 1;
                const prevSong = currentQueue[currentSongIndex];
                showNowPlaying(prevSong);
                console.log(`Playing previous: ${prevSong.title} by ${prevSong.artist}`);
            }
            
            function playNextSong() {
                if (!currentSong) return;
                
                if (repeatMode === 2) {
                    // Repeat one - restart current song
                    currentProgress = 0;
                    updateProgressDisplay(0);
                    console.log(`Repeating: ${currentSong.title}`);
                    return;
                }
                
                if (repeatMode === 1 || currentSongIndex < currentQueue.length - 1) {
                    // Repeat all or not at end of queue
                    currentSongIndex = (currentSongIndex + 1) % currentQueue.length;
                    const nextSong = currentQueue[currentSongIndex];
                    showNowPlaying(nextSong);
                    console.log(`Playing next: ${nextSong.title} by ${nextSong.artist}`);
                } else {
                    // End of queue and no repeat
                    stopProgressSimulation();
                    isPlaying = false;
                    updatePlayButtonStates();
                    console.log('End of queue reached');
                }
            }
            
            // Auto-advance when song ends
            function handleSongEnd() {
                if (repeatMode === 2) {
                    // Repeat one
                    currentProgress = 0;
                    updateProgressDisplay(0);
                    startProgressSimulation();
                } else if (repeatMode === 1 || currentSongIndex < currentQueue.length - 1) {
                    // Repeat all or more songs in queue
                    playNextSong();
                } else {
                    // Stop at end
                    isPlaying = false;
                    updatePlayButtonStates();
                    stopProgressSimulation();
                }
            }

            // Previous button
            document.getElementById('prevButton').addEventListener('click', playPreviousSong);

            // Next button
            document.getElementById('nextButton').addEventListener('click', playNextSong);

            // Like functionality
            let likedSongs = new Set(['Blinding Lights', 'Shape of You']); // Pre-liked songs
            
            function updateLikeButtonState() {
                const likeButtons = document.querySelectorAll('[title="Like"]');
                const isCurrentSongLiked = currentSong && likedSongs.has(currentSong.title);
                
                likeButtons.forEach(button => {
                    const svg = button.querySelector('svg');
                    if (isCurrentSongLiked) {
                        svg.classList.add('text-red-500');
                        button.style.color = '#EF4444';
                    } else {
                        svg.classList.remove('text-red-500');
                        button.style.color = '';
                    }
                });
            }
            
            function toggleLike() {
                if (!currentSong) return;
                
                const isCurrentlyLiked = likedSongs.has(currentSong.title);
                
                if (isCurrentlyLiked) {
                    likedSongs.delete(currentSong.title);
                    console.log(`Removed "${currentSong.title}" from Liked Songs`);
                    
                    // Show visual feedback
                    showNotification(`Removed from Liked Songs`, 'üíî');
                } else {
                    likedSongs.add(currentSong.title);
                    console.log(`Added "${currentSong.title}" to Liked Songs`);
                    
                    // Show visual feedback
                    showNotification(`Added to Liked Songs`, '‚ù§Ô∏è');
                }
                
                updateLikeButtonState();
            }

            // Like button
            document.getElementById('likeButton').addEventListener('click', toggleLike);
            
            // Add like functionality to all like buttons
            document.addEventListener('click', function(e) {
                if (e.target.closest('button[title="Like"]') && !e.target.closest('#likeButton')) {
                    e.stopPropagation();
                    toggleLike();
                }
            });

            // Volume control functions
            function updateVolumeDisplay() {
                const volumeIndicators = document.querySelectorAll('#volumeIndicator, .bottom-player .bg-white');
                const volumeButtons = document.querySelectorAll('#volumeButton, .bottom-player button[title="Volume"]');
                
                volumeIndicators.forEach(indicator => {
                    if (indicator.id === 'volumeIndicator') {
                        indicator.style.width = `${currentVolume}%`;
                    } else {
                        // Bottom player volume indicator
                        indicator.style.width = `${currentVolume}%`;
                    }
                });
                
                // Update volume button icons
                volumeButtons.forEach(button => {
                    const svg = button.querySelector('svg path');
                    if (currentVolume === 0) {
                        svg.setAttribute('d', 'M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z');
                    } else if (currentVolume < 50) {
                        svg.setAttribute('d', 'M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z');
                    } else {
                        svg.setAttribute('d', 'M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z');
                    }
                });
            }
            
            function toggleMute() {
                if (currentVolume > 0) {
                    previousVolume = currentVolume;
                    currentVolume = 0;
                    isMuted = true;
                    console.log('Volume muted');
                } else {
                    currentVolume = previousVolume || 67;
                    isMuted = false;
                    console.log(`Volume unmuted to ${currentVolume}%`);
                }
                updateVolumeDisplay();
            }
            
            function setVolume(percent) {
                currentVolume = Math.round(percent * 100);
                if (currentVolume > 0) {
                    isMuted = false;
                    previousVolume = currentVolume;
                }
                updateVolumeDisplay();
                console.log(`Volume set to ${currentVolume}%`);
            }

            // Volume button (mute/unmute)
            document.getElementById('volumeButton').addEventListener('click', toggleMute);

            // Volume slider
            document.getElementById('volumeSlider').addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
                setVolume(percent);
            });
            
            // Bottom player volume control
            const bottomVolumeBar = document.querySelector('.bottom-player .w-20');
            if (bottomVolumeBar) {
                bottomVolumeBar.addEventListener('click', function(e) {
                    const rect = this.getBoundingClientRect();
                    const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
                    setVolume(percent);
                });
            }

            // Progress bar functionality with drag support
            let isDragging = false;
            let currentProgress = 0.33; // Start at 33% (1:23 of 3:20)
            let totalDuration = 200; // 3:20 in seconds
            let isPlaying = true;
            let progressInterval = null;
            
            function updateProgressDisplay(percent) {
                const progressIndicator = document.getElementById('progressIndicator');
                const bottomProgressIndicator = document.querySelector('.bottom-player .bg-white');
                
                if (progressIndicator) {
                    progressIndicator.style.width = `${percent * 100}%`;
                }
                if (bottomProgressIndicator) {
                    bottomProgressIndicator.style.width = `${percent * 100}%`;
                }
                
                // Update time displays
                const currentSeconds = Math.floor(totalDuration * percent);
                const minutes = Math.floor(currentSeconds / 60);
                const seconds = currentSeconds % 60;
                const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                const currentTimeDisplay = document.getElementById('currentTime');
                const bottomTimeDisplay = document.querySelector('.bottom-player .text-xs');
                
                if (currentTimeDisplay) {
                    currentTimeDisplay.textContent = timeString;
                }
                if (bottomTimeDisplay) {
                    bottomTimeDisplay.textContent = timeString;
                }
                
                currentProgress = percent;
            }
            
            function handleProgressBarInteraction(e, progressBar) {
                const rect = progressBar.getBoundingClientRect();
                const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
                updateProgressDisplay(percent);
                
                const currentSeconds = Math.floor(totalDuration * percent);
                const minutes = Math.floor(currentSeconds / 60);
                const seconds = currentSeconds % 60;
                console.log(`Seeked to ${minutes}:${seconds.toString().padStart(2, '0')}`);
            }
            
            // Main player progress bar
            const mainProgressBar = document.getElementById('progressBar');
            if (mainProgressBar) {
                mainProgressBar.addEventListener('mousedown', function(e) {
                    isDragging = true;
                    handleProgressBarInteraction(e, this);
                    e.preventDefault();
                });
                
                mainProgressBar.addEventListener('click', function(e) {
                    if (!isDragging) {
                        handleProgressBarInteraction(e, this);
                    }
                });
            }
            
            // Bottom player progress bar
            const bottomProgressBar = document.querySelector('.bottom-player .bg-gray-700');
            if (bottomProgressBar) {
                bottomProgressBar.addEventListener('mousedown', function(e) {
                    isDragging = true;
                    handleProgressBarInteraction(e, this);
                    e.preventDefault();
                });
                
                bottomProgressBar.addEventListener('click', function(e) {
                    if (!isDragging) {
                        handleProgressBarInteraction(e, this);
                    }
                });
            }
            
            // Global mouse events for dragging
            document.addEventListener('mousemove', function(e) {
                if (isDragging) {
                    const mainProgressBar = document.getElementById('progressBar');
                    const bottomProgressBar = document.querySelector('.bottom-player .bg-gray-700');
                    
                    // Determine which progress bar is being dragged
                    const activeBar = mainProgressBar && mainProgressBar.contains(document.elementFromPoint(e.clientX, e.clientY)) 
                        ? mainProgressBar 
                        : bottomProgressBar;
                    
                    if (activeBar) {
                        handleProgressBarInteraction(e, activeBar);
                    }
                }
            });
            
            document.addEventListener('mouseup', function() {
                if (isDragging) {
                    isDragging = false;
                    console.log('Seeking completed');
                }
            });
            
            // Prevent text selection while dragging
            document.addEventListener('selectstart', function(e) {
                if (isDragging) {
                    e.preventDefault();
                }
            });
            
            // Notification system
            function showNotification(message, emoji = 'üéµ') {
                // Remove existing notification
                const existingNotification = document.querySelector('.notification');
                if (existingNotification) {
                    existingNotification.remove();
                }
                
                // Create notification
                const notification = document.createElement('div');
                notification.className = 'notification fixed top-4 right-4 bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-2 slide-in-right';
                notification.innerHTML = `
                    <span class="text-lg">${emoji}</span>
                    <span class="font-medium">${message}</span>
                `;
                
                document.body.appendChild(notification);
                
                // Auto-remove after 3 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.classList.add('slide-out-right');
                        setTimeout(() => {
                            if (notification.parentNode) {
                                notification.remove();
                            }
                        }, 300);
                    }
                }, 3000);
            }

            // Auto-progress simulation
            function startProgressSimulation() {
                if (progressInterval) {
                    clearInterval(progressInterval);
                }
                
                progressInterval = setInterval(() => {
                    if (isPlaying && !isDragging && currentProgress < 1) {
                        currentProgress += 1 / totalDuration; // Advance by 1 second
                        if (currentProgress >= 1) {
                            currentProgress = 1;
                            handleSongEnd();
                        }
                        updateProgressDisplay(currentProgress);
                    }
                }, 1000); // Update every second
            }
            
            function stopProgressSimulation() {
                if (progressInterval) {
                    clearInterval(progressInterval);
                    progressInterval = null;
                }
            }
            
            // Start simulation by default
            startProgressSimulation();

            // Bottom player controls
            const bottomPlayButton = document.querySelector('.playing-animation');
            
            // Sync bottom player with main player
            if (bottomPlayButton) {
                bottomPlayButton.addEventListener('click', togglePlayPause);
            }
            
            // Add functionality to bottom player navigation buttons
            const bottomPrevButton = document.querySelector('.bottom-player button:nth-child(2)');
            const bottomNextButton = document.querySelector('.bottom-player button:nth-child(4)');
            
            if (bottomPrevButton) {
                bottomPrevButton.addEventListener('click', playPreviousSong);
            }
            
            if (bottomNextButton) {
                bottomNextButton.addEventListener('click', playNextSong);
            }
            
            // Bottom player shuffle and repeat buttons
            const bottomShuffleButton = document.querySelector('.bottom-player [title="Shuffle"]');
            const bottomRepeatButton = document.querySelector('.bottom-player [title="Repeat"]');
            
            if (bottomShuffleButton) {
                bottomShuffleButton.addEventListener('click', function() {
                    document.getElementById('shuffleButton').click();
                });
            }
            
            if (bottomRepeatButton) {
                bottomRepeatButton.addEventListener('click', function() {
                    document.getElementById('repeatButton').click();
                });
            }

            // Lyrics functionality
            let lyricsVisible = false;
            
            // Tab switching in now playing interface
            document.getElementById('queueTab').addEventListener('click', function() {
                document.getElementById('queueContent').classList.remove('hidden');
                document.getElementById('lyricsContent').classList.add('hidden');
                
                // Update tab styles
                this.classList.add('text-primary', 'border-b-2', 'border-primary');
                this.classList.remove('text-gray-400');
                document.getElementById('lyricsTab').classList.remove('text-primary', 'border-b-2', 'border-primary');
                document.getElementById('lyricsTab').classList.add('text-gray-400');
            });
            
            document.getElementById('lyricsTab').addEventListener('click', function() {
                document.getElementById('lyricsContent').classList.remove('hidden');
                document.getElementById('queueContent').classList.add('hidden');
                
                // Update tab styles
                this.classList.add('text-primary', 'border-b-2', 'border-primary');
                this.classList.remove('text-gray-400');
                document.getElementById('queueTab').classList.remove('text-primary', 'border-b-2', 'border-primary');
                document.getElementById('queueTab').classList.add('text-gray-400');
                
                // Update lyrics for current song
                if (currentSong) {
                    document.getElementById('lyricsTitle').textContent = currentSong.title;
                    document.getElementById('lyricsArtist').textContent = currentSong.artist;
                }
            });
            
            // Lyrics button functionality (bottom player)
            document.getElementById('lyricsButton').addEventListener('click', function() {
                if (currentSong) {
                    showNowPlaying(currentSong);
                    // Switch to lyrics tab
                    document.getElementById('lyricsTab').click();
                } else {
                    alert('No song is currently playing');
                }
            });
            
            // Main lyrics button functionality (now playing interface)
            document.getElementById('mainLyricsButton').addEventListener('click', function() {
                // Switch to lyrics tab
                document.getElementById('lyricsTab').click();
            });

            // Sample lyrics data for different songs
            const lyricsData = {
                "Blinding Lights": [
                    "Yeah",
                    "I've been tryna call",
                    "I've been on my own for long enough",
                    "Maybe you can show me how to love, maybe",
                    "I feel like I'm just missing",
                    "Something when you're gone",
                    "Something in the way you move",
                    "Makes me feel like I can't live without you",
                    "It takes me all the way",
                    "I want you to stay",
                    "I feel like I'm just missing something when you're gone",
                    "Something in the way you move",
                    "Makes me feel like I can't live without you",
                    "It takes me all the way",
                    "I want you to stay"
                ],
                "Shape of You": [
                    "The club isn't the best place to find a lover",
                    "So the bar is where I go",
                    "Me and my friends at the table doing shots",
                    "Drinking fast and then we talk slow",
                    "Come over and start up a conversation with just me",
                    "And trust me I'll give it a chance now",
                    "Take my hand, stop, put Van the Man on the jukebox",
                    "And then we start to dance, and now I'm singing like",
                    "Girl, you know I want your love",
                    "Your love was handmade for somebody like me",
                    "Come on now, follow my lead",
                    "I may be crazy, don't mind me"
                ],
                "Bohemian Rhapsody": [
                    "Is this the real life?",
                    "Is this just fantasy?",
                    "Caught in a landslide",
                    "No escape from reality",
                    "Open your eyes",
                    "Look up to the skies and see",
                    "I'm just a poor boy, I need no sympathy",
                    "Because I'm easy come, easy go",
                    "Little high, little low",
                    "Any way the wind blows doesn't really matter to me",
                    "To me"
                ]
            };

            // Function to update lyrics display
            function updateLyrics(songTitle) {
                const lyrics = lyricsData[songTitle] || [
                    "Lyrics not available for this song",
                    "But the music speaks for itself",
                    "Let the melody carry you away",
                    "Feel the rhythm in your heart",
                    "Music is the universal language",
                    "That connects us all"
                ];
                
                const lyricsContainer = document.getElementById('lyricsText');
                lyricsContainer.innerHTML = lyrics.map((line, index) => {
                    const isCurrentLine = index === Math.floor(lyrics.length / 2); // Simulate current line
                    return `<div class="lyrics-line ${isCurrentLine ? 'text-primary font-semibold opacity-100' : 'opacity-60'}">${line}</div>`;
                }).join('');
            }

            // Update lyrics when song changes
            const originalShowNowPlaying = showNowPlaying;
            showNowPlaying = function(song) {
                originalShowNowPlaying(song);
                updateLyrics(song.title);
            };

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Only handle shortcuts when not typing in input fields
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
                
                switch(e.code) {
                    case 'Space':
                        e.preventDefault();
                        togglePlayPause();
                        break;
                    case 'ArrowRight':
                        if (e.shiftKey) {
                            e.preventDefault();
                            playNextSong();
                        }
                        break;
                    case 'ArrowLeft':
                        if (e.shiftKey) {
                            e.preventDefault();
                            playPreviousSong();
                        }
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        const newVolumeUp = Math.min(100, currentVolume + 10);
                        setVolume(newVolumeUp / 100);
                        showNotification(`Volume: ${newVolumeUp}%`, 'üîä');
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        const newVolumeDown = Math.max(0, currentVolume - 10);
                        setVolume(newVolumeDown / 100);
                        showNotification(`Volume: ${newVolumeDown}%`, 'üîâ');
                        break;
                    case 'KeyM':
                        e.preventDefault();
                        toggleMute();
                        showNotification(currentVolume === 0 ? 'Muted' : 'Unmuted', currentVolume === 0 ? 'üîá' : 'üîä');
                        break;
                    case 'KeyL':
                        e.preventDefault();
                        toggleLike();
                        break;
                    case 'KeyS':
                        e.preventDefault();
                        document.getElementById('shuffleButton').click();
                        break;
                    case 'KeyR':
                        e.preventDefault();
                        document.getElementById('repeatButton').click();
                        break;
                    case 'Escape':
                        if (!nowPlayingInterface.classList.contains('hidden')) {
                            closeNowPlaying();
                        }
                        break;
                }
            });
            
            // Initialize default states
            updateVolumeDisplay();
            updateShuffleState();
            updateRepeatState();

            // Make showNowPlaying globally accessible
            window.showNowPlaying = showNowPlaying;
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98064ce294402e39',t:'MTc1ODA4Nzk1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>



<!-- Full API Integration Script for annonymous-sage.saavn API -->
<script>
(() => {
const API_ROOT = "https://annonymous-sage.vercel.app/api";
const $ = id => document.getElementById(id);
let audio = new Audio();
audio.crossOrigin = "anonymous";
let queue = JSON.parse(localStorage.getItem("mp_queue")||"[]");
let liked = JSON.parse(localStorage.getItem("mp_liked")||"[]");
let recently = JSON.parse(localStorage.getItem("mp_recently")||"[]");
let currentIndex = 0;

// UTILITIES
function log(...a){ console.log("[MP]",...a); }
function saveState(){ localStorage.setItem("mp_queue", JSON.stringify(queue)); localStorage.setItem("mp_liked", JSON.stringify(liked)); localStorage.setItem("mp_recently", JSON.stringify(recently)); }

async function apiFetch(path){
  const url = API_ROOT + path;
  try {
    const res = await fetch(url);
    if (!res.ok) {
      const txt = await res.text();
      console.error("API error", url, res.status, txt);
      return null;
    }
    const json = await res.json();
    log("apiFetch", url, json);
    return json;
  } catch (e){
    console.error("apiFetch failed", url, e);
    return null;
  }
}

// Normalize a song object from search results or song detail
function pickStreamFromItem(item){
  if (!item) return null;
  if (item.downloadUrl && Array.isArray(item.downloadUrl) && item.downloadUrl.length>0){
    const full = item.downloadUrl.find(d=>/320/.test(String(d.quality))) || item.downloadUrl[item.downloadUrl.length-1];
    if (full && full.url) return full.url;
  }
  if (item.media_url) return item.media_url;
  if (item.url && item.url.includes("aac.saavncdn.com")) return item.url;
  return null;
}

function normalizeSong(item){
  if (!item) return null;
  return {
    id: item.id || item.song_id || "",
    title: item.name || item.title || "",
    artist: (item.artists && item.artists.primary && item.artists.primary[0] && item.artists.primary[0].name) || (item.artist_name) || "Unknown",
    album: (item.album && item.album.name) || "",
    image: (item.image && item.image.length? item.image[item.image.length-1].url : ""),
    duration: item.duration || item.length || item.duration_ms || "",
    stream: pickStreamFromItem(item) || "",
    raw: item
  };
}

// RENDERERS
function renderSongs(containerId, items){
  const el = $(containerId);
  if (!el) return;
  el.innerHTML = "";
  if (!items || items.length===0){ el.innerHTML = '<div class="text-gray-400 p-3">No results.</div>'; return; }
  items.forEach((it, idx) => {
    const s = normalizeSong(it);
    const row = document.createElement("div");
    row.className = "song-row p-3 bg-gray-800 rounded flex items-center justify-between space-x-4";
    row.innerHTML = `
      <div class="flex items-center space-x-3">
        <div style="width:48px;height:48px;flex:0 0 48px;"><img src="${s.image||''}" alt="" style="width:48px;height:48px;border-radius:6px;object-fit:cover"></div>
        <div>
          <div class="font-semibold">${escapeHtml(s.title)}</div>
          <div class="text-sm text-gray-400">${escapeHtml(s.artist)}</div>
        </div>
      </div>
      <div class="flex items-center space-x-2">
        <button class="mp-play-btn px-3 py-1 rounded bg-blue-500" data-id="${s.id}" data-stream="${s.stream}">‚ñ∂</button>
        <button class="mp-like-btn px-2 py-1 rounded bg-gray-700" data-id="${s.id}">${liked.includes(s.id)?'‚ô•':'‚ô°'}</button>
      </div>
    `;
    el.appendChild(row);
  });
  el.querySelectorAll(".mp-play-btn").forEach(b=> b.addEventListener("click", (e)=>{
    const id = b.dataset.id; const stream = b.dataset.stream;
    if (stream && stream.length>0){
      playByStream(stream, id);
      addToRecently(id);
    } else {
      apiFetch(`/songs?id=${encodeURIComponent(id)}`).then(json=>{
        if (!json) return;
        const result = json.data && json.data[0] ? json.data[0] : json.data || json;
        const item = Array.isArray(result)? result[0] : result;
        const s = normalizeSong(item);
        if (s.stream) playByStream(s.stream, s.id);
        addToRecently(s.id);
      });
    }
  }));
  el.querySelectorAll(".mp-like-btn").forEach(b=> b.addEventListener("click", ()=>{
    const id = b.dataset.id;
    if (!id) return;
    if (liked.includes(id)) { liked = liked.filter(x=>x!==id); b.textContent='‚ô°'; }
    else { liked.push(id); b.textContent='‚ô•'; }
    saveState();
    renderLikedSongs();
  }));
}

function escapeHtml(s){ if(!s) return ""; return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

// PLAYER
function playByStream(streamUrl, id){
  if (!streamUrl) { console.warn("no stream"); return; }
  if (!streamUrl.startsWith("http")) streamUrl = streamUrl.startsWith('/') ? streamUrl : API_ROOT + streamUrl;
  try { audio.pause(); } catch(e) {}
  audio.src = streamUrl;
  audio.play().then(()=>{
    log("playing", streamUrl);
    updateNowPlaying(id);
  }).catch(err=>{ console.error("play error", err); });
}

function updateNowPlaying(id){
  apiFetch(`/songs?id=${encodeURIComponent(id)}`).then(json=>{
    let item = null;
    if (!json) return;
    if (Array.isArray(json.data)) item = json.data[0];
    else if (Array.isArray(json)) item = json[0];
    else item = json.data || json;
    const s = normalizeSong(item);
    const now = $("nowPlayingInfo");
    if (now) now.innerHTML = `<div class="font-semibold">${escapeHtml(s.title)}</div><div class="text-sm text-gray-400">${escapeHtml(s.artist)}</div>`;
  });
}

// QUEUE & RECENTLY
function addToQueue(item){ if(!item) return; queue.push(item); saveState(); renderQueue(); }
function renderQueue(){ const el = $("queueList"); if(!el) return; el.innerHTML = queue.map((id, i)=>`<div class="p-2 border-b">${i+1}. ${escapeHtml(id)}</div>`).join(''); }
function addToRecently(id){ if(!id) return; recently = [id, ...recently.filter(x=>x!==id)].slice(0,50); saveState(); renderRecently(); }
function renderRecently(){ const el = $("recentlyPlayedList"); if(!el) return; if(!recently.length) el.innerHTML='<div class="text-gray-400 p-3">No recently played</div>'; else { el.innerHTML = ''; recently.forEach(id=>{ const div=document.createElement('div'); div.className='p-2 border-b text-sm'; div.textContent = id; el.appendChild(div); }); } }

function renderLikedSongs(){ const el = $("likedSongsList"); if(!el) return; if(!liked.length) el.innerHTML='<div class="text-gray-400 p-3">No liked songs</div>'; else { el.innerHTML=''; Promise.all(liked.map(id=>apiFetch(`/songs?id=${encodeURIComponent(id)}`))).then(results=>{ results.forEach(r=>{ const item = Array.isArray(r.data)? r.data[0] : (r.data || r); const s = normalizeSong(item); const row = document.createElement('div'); row.className='p-2 border-b flex justify-between'; row.innerHTML = `<div>${escapeHtml(s.title)}<div class="text-sm text-gray-400">${escapeHtml(s.artist)}</div></div><div><button class="play-like-play px-2 py-1 bg-blue-500" data-stream="${escapeHtml(s.stream)}">‚ñ∂</button></div>`; el.appendChild(row); row.querySelector('.play-like-play').addEventListener('click', ()=> playByStream(s.stream)); }); }); } }

// LYRICS
async function loadLyrics(songId){
  const res = await apiFetch(`/lyrics?id=${encodeURIComponent(songId)}`);
  if (!res) { $("lyricsContent") && ($("lyricsContent").textContent = "No lyrics found"); return; }
  const lyricTxt = (res.data && res.data.lyrics) || (res.lyrics) || JSON.stringify(res);
  $("lyricsContent") && ($("lyricsContent").textContent = lyricTxt);
}

// SEARCH wiring
const searchBox = $("mainSearchInput");
if (searchBox){
  let timer = null;
  searchBox.addEventListener('input', (e)=>{
    const q = e.target.value.trim();
    clearTimeout(timer);
    if (!q){ renderSongs('songResults', []); return; }
    timer = setTimeout(()=> performSearch(q), 300);
  });
}

async function performSearch(query){
  const json = await apiFetch(`/search/songs?query=${encodeURIComponent(query)}`);
  if (!json || !json.success) { renderSongs('songResults', []); return; }
  const results = (json.data && (json.data.results || json.data)) || json.results || json.data || [];
  let items = results;
  if (results && results.results) items = results.results;
  if (!Array.isArray(items) && Array.isArray(json.data && json.data.results)) items = json.data.results;
  renderSongs('songResults', items);
  if (items && items.length>0) {
    const top = normalizeSong(items[0]);
    const topEl = $("topResult");
    if (topEl) topEl.innerHTML = `<div class="p-4"><div class="font-semibold">${escapeHtml(top.title)}</div><div class="text-sm text-gray-400">${escapeHtml(top.artist)}</div></div><div><button id="topPlay" class="px-3 py-1 bg-blue-500 rounded">Play</button></div>`;
    const btn = $("topPlay"); if (btn) btn.addEventListener('click', ()=>{ if(top.stream) playByStream(top.stream, top.id); else playById(top.id); addToRecently(top.id); });
  } else {
    const topEl = $("topResult"); if (topEl) topEl.innerHTML = '<div class="text-gray-400 p-3">No top result</div>';
  }
}

async function playById(id){
  const json = await apiFetch(`/songs?id=${encodeURIComponent(id)}`);
  if (!json) return;
  const item = Array.isArray(json.data)? json.data[0] : (json.data || json);
  const s = normalizeSong(item);
  if (s.stream) playByStream(s.stream, s.id);
  else console.warn("no stream for id", id);
  addToRecently(s.id);
}

// Player controls UI hook
function hookPlayerUI(){
  const playBtn = $("playerPlayBtn");
  const pauseBtn = $("playerPauseBtn");
  const prevBtn = $("playerPrevBtn");
  const nextBtn = $("playerNextBtn");
  const prog = $("playerProgress");
  const curT = $("playerCurrentTime");
  const durT = $("playerDuration");
  if (playBtn) playBtn.addEventListener('click', ()=> audio.play());
  if (pauseBtn) pauseBtn.addEventListener('click', ()=> audio.pause());
  if (prevBtn) prevBtn.addEventListener('click', ()=> { if (queue.length>0 && currentIndex>0) { currentIndex--; playById(queue[currentIndex]); } });
  if (nextBtn) nextBtn.addEventListener('click', ()=> { if (queue.length>0 && currentIndex<queue.length-1) { currentIndex++; playById(queue[currentIndex]); } });
  audio.ontimeupdate = ()=> {
    if (prog) { if (audio.duration) prog.value = (audio.currentTime / audio.duration) * 100; }
    if (curT) curT.textContent = formatTime(audio.currentTime);
    if (durT) durT.textContent = audio.duration ? formatTime(audio.duration) : "--:--";
  };
  prog && prog.addEventListener('input', ()=> { if (audio.duration) audio.currentTime = (prog.value/100) * audio.duration; });
}

function formatTime(s){ if (!s && s!==0) return "--:--"; s = Math.floor(s); const m = Math.floor(s/60); const sec = s%60; return `${m}:${sec.toString().padStart(2,'0')}`; }

document.addEventListener('DOMContentLoaded', ()=>{
  hookPlayerUI();
  renderQueue();
  renderRecently();
  renderLikedSongs();
  const gs = $("getStartedBtn");
  if (gs) gs.addEventListener('click', ()=>{ document.getElementById('landingPage')?.classList.add('hidden'); document.getElementById('mainApp')?.classList.remove('hidden'); performSearch('deva'); });
});
})();</script>
<!-- End Full API Integration Script -->


<!-- BEGIN: MusicPioneer - Interactive App Script & Mini Player -->
<style>
/* Mini-player styles */
#miniPlayer {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(10,10,20,0.95);
  border-top: 1px solid rgba(255,255,255,0.04);
  backdrop-filter: blur(6px);
  padding: 8px 12px;
  display: flex;
  align-items: center;
  gap: 12px;
  z-index: 60;
  transform: translateY(110%);
  transition: transform 260ms ease;
}
#miniPlayer.visible { transform: translateY(0%); }
#miniPlayer img { width:48px; height:48px; border-radius:6px; object-fit:cover; }
#miniPlayer .meta { flex: 1; min-width: 0; }
#miniPlayer .meta .title { font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
#miniPlayer .meta .artist { font-size:12px; color: #c7c7d6; }
#miniPlayer .controls { display:flex; gap:8px; align-items:center; }
#miniPlayer .progress {
  position: absolute;
  left: 0; right: 0; bottom: 0; height:4px; background: rgba(255,255,255,0.06);
}
#miniPlayer .progress > div { height:100%; width:0%; background: linear-gradient(90deg, #8B5CF6, #F59E0B); transition: width 100ms linear; }
#mp-time { font-size:12px; color:#9aa0b4; margin-left:8px; min-width:64px; text-align:right; }
.mp-btn { background:transparent; border:0; color:white; padding:8px; border-radius:8px; cursor:pointer; }
.mp-btn:hover { background: rgba(255,255,255,0.03); }
@media (max-width:720px){
  #miniPlayer .meta .title { font-size:13px; }
  #miniPlayer img { width:44px; height:44px; }
}
/* small helper */
.hidden { display:none !important; }
</style>

<!-- Hidden HTML5 audio element -->
<audio id="mp-audio" crossorigin="anonymous"></audio>

<!-- Mini Player UI -->
<div id="miniPlayer" class="hidden" aria-hidden="true" role="region" aria-label="Music player">
  <img id="mp-cover" src="" alt="cover">
  <div class="meta">
    <div class="title" id="mp-title">Not playing</div>
    <div class="artist" id="mp-artist">‚Äî</div>
  </div>
  <div class="controls">
    <div style="display:flex;align-items:center;gap:6px;">
      <button id="mp-prev" class="mp-btn" title="Previous" aria-label="Previous">‚èÆ</button>
      <button id="mp-play" class="mp-btn" title="Play" aria-label="Play Pause">‚ñ∂</button>
      <button id="mp-next" class="mp-btn" title="Next" aria-label="Next">‚è≠</button>
    </div>
    <div style="width:160px; max-width:35vw; min-width:90px; margin-left:8px;">
      <div class="progress" aria-hidden="true"><div id="mp-progress"></div></div>
    </div>
    <div id="mp-time">0:00 / 0:00</div>
  </div>
</div>

<script>
// MusicPioneer interactive script - vanilla JS
(function(){
  // small helpers
  const $ = (s, root=document) => root.querySelector(s);
  const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));
  const escapeHtml = (str='') => String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');

  // Sections map
  const SECTIONS = {
    landing: $('#landingPage'),
    app: $('#mainApp'),
    home: $('#homeContent'),
    search: $('#searchContent'),
    liked: $('#likedSongsContent'),
    recent: $('#recentlyPlayedContent'),
    playlist: $('#yourPlaylistContent'),
    account: $('#accountContent'),
    profile: $('#profileContent'),
    settings: $('#settingsContent'),
    library: $('#libraryContent')
  };

  function hideAppSections(){ Object.values(SECTIONS).forEach(s=>{ if(s && s !== SECTIONS.landing && s !== SECTIONS.app) s.classList.add('hidden'); }); }
  function showSection(name){
    // show app and the requested section
    SECTIONS.landing && SECTIONS.landing.classList.add('hidden');
    SECTIONS.app && SECTIONS.app.classList.remove('hidden');
    hideAppSections();
    if(SECTIONS[name]) SECTIONS[name].classList.remove('hidden');
    // special: when opening liked, reload list
    if(name === 'liked') loadLikedSongs();
    if(name === 'profile') populateProfileFromStorage();
  }

  // wire main CTA
  $('#getStartedBtn')?.addEventListener('click', ()=> showSection('home') );
  $('#learnMoreBtn')?.addEventListener('click', ()=> { alert('MusicPioneer ‚Äî Learn more: This demo connects to an unofficial music API for search and playback.'); });

  // Sidebar nav (first nav in mainApp)
  const sidebar = $('#mainApp > div'); // first child is sidebar
  if(sidebar){
    $$('nav a', sidebar).forEach(a=>{
      const txt = (a.textContent||'').trim().toLowerCase();
      a.addEventListener('click', (ev)=>{
        ev.preventDefault();
        if(txt.includes('home')) showSection('home');
        else if(txt.includes('search')) { showSection('search'); $('#mainSearchInput')?.focus(); }
        else if(txt.includes('your library')) showSection('library');
      });
    });
  }

  // Playlist quick links
  $('#likedSongsLink')?.addEventListener('click', (e)=>{ e.preventDefault(); showSection('liked'); });
  $('#recentlyPlayedLink')?.addEventListener('click', (e)=>{ e.preventDefault(); showSection('recent'); });
  $('#yourPlaylistLink')?.addEventListener('click', (e)=>{ e.preventDefault(); showSection('playlist'); });

  // Search integration
  const searchInput = $('#mainSearchInput');
  const searchResults = $('#searchResults');
  const browseCategories = $('#browseCategories');
  const topResult = $('#topResult');
  const songResults = $('#songResults');
  const artistResults = $('#artistResults');
  const albumResults = $('#albumResults');

  function findSongsInResponse(d){
    if(!d) return [];
    if(Array.isArray(d)) return d;
    if(d.results && Array.isArray(d.results)) return d.results;
    if(d.songs && Array.isArray(d.songs)) return d.songs;
    if(d.data && Array.isArray(d.data.songs)) return d.data.songs;
    // some wrappers: try top-level object values that are arrays of objects containing name/artist
    for(const k of Object.keys(d)){
      if(Array.isArray(d[k]) && d[k].length && typeof d[k][0] === 'object' && (d[k][0].name || d[k][0].title)) return d[k];
    }
    return [];
  }

  let searchDebounce = null;
  if(searchInput){
    searchInput.addEventListener('input', (e)=>{
      const q = e.target.value || '';
      clearTimeout(searchDebounce);
      searchDebounce = setTimeout(()=> performSearch(q.trim()), 320);
    });
  }

  async function performSearch(query){
    if(!query){
      if(searchResults) searchResults.classList.add('hidden');
      if(browseCategories) browseCategories.classList.remove('hidden');
      return;
    }
    if(searchResults) searchResults.classList.remove('hidden');
    if(browseCategories) browseCategories.classList.add('hidden');

    // loading state
    if(topResult) topResult.innerHTML = '<p class="text-gray-400">Searching‚Ä¶</p>';
    if(songResults) songResults.innerHTML = '<p class="text-gray-400">Loading songs‚Ä¶</p>';
    try{
      const url = `https://annonymous-sage.vercel.app/api/search/songs?query=${encodeURIComponent(query)}&limit=20`;
      const res = await fetch(url);
      const data = await res.json();
      console.log('API response:', data);
      const songs = findSongsInResponse(data);
      topResult.innerHTML = '';
      songResults.innerHTML = '';
      artistResults.innerHTML = '';
      albumResults.innerHTML = '';

      if(songs && songs.length){
        const first = songs[0];
        const firstImage = first.image?.[2]?.url || first.image || first.cover || '';
        topResult.innerHTML = `
          <div class="flex items-center space-x-4">
            <img src="${firstImage}" alt="${escapeHtml(first.name || first.title)}" class="w-16 h-16 rounded object-cover">
            <div>
              <h4 class="font-bold">${escapeHtml(first.name || first.title || 'Unknown')}</h4>
              <p class="text-gray-400">${escapeHtml(first.artists?.[0]?.name || (first.artist && first.artist.name) || first.artist || 'Unknown')}</p>
              <div class="mt-2"><button class="mp-play-now rounded-full bg-primary px-3 py-1 text-sm">Play</button></div>
            </div>
          </div>
        `;
        // populate songs list
        songs.forEach((song, idx)=>{
          const image = song.image?.[2]?.url || song.image || song.cover || '';
          const title = escapeHtml(song.name || song.title || 'Unknown');
          const artist = escapeHtml(song.artists?.[0]?.name || song.artist || 'Unknown');
          const media = song.downloadUrl?.[0]?.url || song.media_url || song.url || song.streamUrl || song.streamingUrl || '';
          // render with data attributes
          songResults.innerHTML += `
            <div class="search-song flex items-center justify-between bg-gray-800 p-2 rounded hover:bg-gray-700 cursor-pointer" data-media="${encodeURIComponent(media)}" data-title="${title}" data-artist="${artist}" data-image="${encodeURIComponent(image)}">
              <div class="flex items-center space-x-4">
                <span class="text-primary font-bold w-6">${idx+1}</span>
                <img class="w-10 h-10 rounded object-cover" src="${image}" alt="${title}">
                <div>
                  <p class="font-semibold">${title}</p>
                  <p class="text-sm text-gray-400">${artist}</p>
                </div>
              </div>
              <div class="flex items-center space-x-2">
                <button class="play-btn mp-btn" aria-label="Play ${title}">‚ñ∂</button>
                <button class="like-btn mp-btn" aria-label="Like ${title}">‚ù§Ô∏è</button>
              </div>
            </div>`;
        });
      } else {
        topResult.innerHTML = '<p class="text-gray-400">No results found.</p>';
      }
    } catch(err){
      console.error('Search error', err);
      if(topResult) topResult.innerHTML = `<p class="text-red-400">Error fetching results</p>`;
    }
  }

  // Event delegation for play / like in results
  if(songResults){
    songResults.addEventListener('click', (ev)=>{
      const songEl = ev.target.closest('.search-song');
      if(!songEl) return;
      if(ev.target.closest('.play-btn')){
        const media = decodeURIComponent(songEl.dataset.media || '');
        const title = songEl.dataset.title;
        const artist = songEl.dataset.artist;
        const img = decodeURIComponent(songEl.dataset.image || '');
        if(!media){ alert('No preview available for this track.'); return; }
        player.playNow({url: media, title, artist, cover: img});
      } else if(ev.target.closest('.like-btn')){
        const title = songEl.dataset.title;
        const artist = songEl.dataset.artist;
        const img = decodeURIComponent(songEl.dataset.image || '');
        const media = decodeURIComponent(songEl.dataset.media || '');
        toggleLike({id: media || title + '|' + artist, title, artist, cover: img, media});
        ev.target.classList.add('animate-pulse');
        setTimeout(()=>ev.target.classList.remove('animate-pulse'), 600);
      } else {
        // clicking anywhere on row -> show topResult details or play
        const media = decodeURIComponent(songEl.dataset.media || '');
        const title = songEl.dataset.title;
        const artist = songEl.dataset.artist;
        const img = decodeURIComponent(songEl.dataset.image || '');
        // small UX: play on row click
        if(media) player.playNow({url: media, title, artist, cover: img});
      }
    });
  }

  // Basic in-memory queue + persistent liked storage
  const player = {
    audio: $('#mp-audio'),
    queue: [],
    index: -1,
    isPlaying: false,
    playNow(track){ // track: {url, title, artist, cover}
      if(!track || !track.url){ alert('No playable audio URL'); return; }
    },
    playNow(track){
      const url = track.url;
      this.queue = [track]; this.index = 0;
      this._setAndPlay(track);
    },
    enqueue(track){
      this.queue.push(track);
    },
    _setAndPlay(track){
      try{
        this.audio.src = track.url;
        this.audio.play().catch(e=>console.warn('Playback prevented', e));
        this.isPlaying = true;
        updateMiniUI(track);
      } catch(e){
        console.error('play error', e);
      }
    },
    playIndex(i){
      if(i < 0 || i >= this.queue.length) return;
      this.index = i;
      this._setAndPlay(this.queue[i]);
    },
    playNext(){
      if(this.index + 1 < this.queue.length) this.playIndex(this.index + 1);
      else { this.audio.pause(); this.isPlaying = false; }
    },
    playPrev(){
      if(this.index - 1 >= 0) this.playIndex(this.index - 1);
    },
    togglePlayPause(){
      if(this.audio.paused) this.audio.play();
      else this.audio.pause();
    }
  };

  // UI bindings for mini-player
  const mini = $('#miniPlayer');
  const mpCover = $('#mp-cover'); const mpTitle = $('#mp-title'); const mpArtist = $('#mp-artist');
  const mpPlayBtn = $('#mp-play'); const mpPrev = $('#mp-prev'); const mpNext = $('#mp-next'); const mpProgress = $('#mp-progress'); const mpTime = $('#mp-time');

  function updateMiniUI(track){
    if(!track) return;
    mpCover.src = track.cover || '';
    mpCover.alt = track.title || 'cover';
    mpTitle.textContent = track.title || 'Untitled';
    mpArtist.textContent = track.artist || 'Unknown';
    mini.classList.remove('hidden'); mini.classList.add('visible'); mini.setAttribute('aria-hidden','false');
    // update play icon
    mpPlayBtn.textContent = '‚è∏';
  }

  // wire mp buttons
  mpPlayBtn?.addEventListener('click', ()=>{ if(player.audio.paused) { player.audio.play(); mpPlayBtn.textContent='‚è∏'; } else { player.audio.pause(); mpPlayBtn.textContent='‚ñ∂'; } });
  mpPrev?.addEventListener('click', ()=> player.playPrev());
  mpNext?.addEventListener('click', ()=> player.playNext());

  // audio events
  if(player.audio){
    player.audio.addEventListener('timeupdate', ()=>{
      const cur = player.audio.currentTime || 0;
      const dur = player.audio.duration || 0;
      const pct = dur ? (cur/dur)*100 : 0;
      mpProgress.style.width = pct + '%';
      mpTime.textContent = formatTime(cur) + ' / ' + (dur ? formatTime(dur) : '0:00');
    });
    player.audio.addEventListener('ended', ()=> player.playNext() );
    player.audio.addEventListener('play', ()=> { mpPlayBtn.textContent = '‚è∏'; });
    player.audio.addEventListener('pause', ()=> { mpPlayBtn.textContent = '‚ñ∂'; });
  }

  function formatTime(t){
    if(!t || !isFinite(t)) return '0:00';
    const m = Math.floor(t/60); const s = Math.floor(t%60); return `${m}:${s.toString().padStart(2,'0')}`;
  }

  // Like management (stored as array of objects)
  function getLiked(){ try{ return JSON.parse(localStorage.getItem('mp_liked')||'[]'); } catch(e){ return []; } }
  function saveLiked(arr){ localStorage.setItem('mp_liked', JSON.stringify(arr)); }
  function toggleLike(song){
    const list = getLiked();
    const idx = list.findIndex(s => s.id === (song.id || song.media || (song.title + '|' + song.artist)));
    if(idx >= 0){ list.splice(idx,1); saveLiked(list); toast('Removed from Liked Songs'); }
    else { const obj = { id: song.id || song.media || (song.title + '|' + song.artist), title: song.title, artist: song.artist, cover: song.cover, media: song.media }; list.push(obj); saveLiked(list); toast('Added to Liked Songs'); }
    // if liked view open, refresh
    if(!SECTIONS.liked.classList.contains('hidden')) loadLikedSongs();
  }
  window.toggleLike = toggleLike; // expose for console/testing

  // populate liked list UI
  function elFromLikedItem(item, idx){
    return `
      <div class="grid grid-cols-12 gap-4 px-4 py-2 text-sm text-gray-400 border-b border-gray-800 items-center">
        <div class="col-span-1">${idx+1}</div>
        <div class="col-span-5 flex items-center space-x-3">
          <img src="${item.cover||''}" class="w-10 h-10 rounded object-cover" alt="${escapeHtml(item.title)}">
          <div>
            <div class="text-white font-semibold">${escapeHtml(item.title)}</div>
            <div class="text-xs text-gray-400">${escapeHtml(item.artist)}</div>
          </div>
        </div>
        <div class="col-span-3">${escapeHtml(item.album||'‚Äî')}</div>
        <div class="col-span-2 text-xs">${escapeHtml(item.addedAt||'‚Äî')}</div>
        <div class="col-span-1">
          <div style="display:flex;gap:6px;justify-end;">
            <button class="mp-btn like-remove" data-id="${escapeHtml(item.id)}" title="Remove">üóë</button>
            <button class="mp-btn like-play" data-media="${encodeURIComponent(item.media||'')}" data-title="${escapeHtml(item.title)}" data-artist="${escapeHtml(item.artist)}" data-cover="${encodeURIComponent(item.cover||'')}" title="Play">‚ñ∂</button>
          </div>
        </div>
      </div>
    `;
  }
  function loadLikedSongs(){
    const list = getLiked();
    const container = $('#likedSongsList');
    if(!container) return;
    container.innerHTML = '';
    if(!list.length){
      container.innerHTML = '<div class="p-4 text-gray-400">No liked songs yet. Use the search to find songs and ‚ù§Ô∏è to like them.</div>';
      return;
    }
    list.forEach((it, i)=> container.innerHTML += elFromLikedItem(it,i) );
    // attach handlers (delegation)
    container.querySelectorAll('.like-remove').forEach(btn=> btn.addEventListener('click', ()=>{
      const id = btn.dataset.id;
      const arr = getLiked().filter(x=> x.id !== id); saveLiked(arr); loadLikedSongs(); toast('Removed');
    }));
    container.querySelectorAll('.like-play').forEach(btn=> btn.addEventListener('click', ()=>{
      const media = decodeURIComponent(btn.dataset.media||'');
      const title = btn.dataset.title;
      const artist = btn.dataset.artist;
      const cover = decodeURIComponent(btn.dataset.cover||'');
      if(media) player.playNow({url: media, title, artist, cover});
    }));
  }

  // quick toast
  function toast(msg){
    console.log('TOAST:', msg);
    // small ephemeral HUD
    const t = document.createElement('div');
    t.textContent = msg;
    t.style.position='fixed'; t.style.right='18px'; t.style.bottom='110px'; t.style.background='rgba(0,0,0,0.7)'; t.style.padding='8px 12px'; t.style.borderRadius='8px'; t.style.color='white'; t.style.zIndex=9999;
    document.body.appendChild(t);
    setTimeout(()=> t.style.opacity='0', 1600);
    setTimeout(()=> t.remove(), 2200);
  }

  // playback wrapper used by search click
  // this will set queue = [track] and play it
  player.playNow = function(track){
    if(!track || !track.url) { alert('No playable url'); return; }
    this.queue = [track]; this.index = 0;
    this._setAndPlay(track);
  };
  player._setAndPlay = function(track){
    this.audio.src = track.url;
    this.audio.play().catch(e=>console.warn('play prevented', e));
    this.isPlaying = true;
    updateMiniUI(track);
  };

  // topResult 'Play' button (delegation)
  document.addEventListener('click', (ev)=>{
    if(ev.target && ev.target.matches('.mp-play-now')){
      const parent = ev.target.closest('#topResult');
      if(!parent) return;
      // try to extract info from markup
      const img = parent.querySelector('img')?.src || '';
      const title = parent.querySelector('h4')?.textContent || 'Unknown';
      const artist = parent.querySelector('p')?.textContent || '';
      // Try to find a song element from search results to reuse its data if present
      const firstsong = $('#songResults .search-song');
      const media = firstsong?.dataset?.media ? decodeURIComponent(firstsong.dataset.media) : '';
      if(media) player.playNow({url: media, title, artist, cover: img});
      else toast('No playable preview found for the top result.');
    }
  });

  // profile & settings persistence (simple localStorage)
  function populateProfileFromStorage(){
    const profileSection = $('#profileContent');
    if(!profileSection) return;
    const inputs = profileSection.querySelectorAll('input,textarea,select');
    inputs.forEach(ip=>{
      const key = 'mp_profile_' + (ip.name || ip.id || ip.placeholder || ip.getAttribute('aria-label') || '');
      const val = localStorage.getItem(key);
      if(val !== null){
        if(ip.type === 'checkbox') ip.checked = (val === 'true');
        else ip.value = val;
      }
      // store on change
      ip.addEventListener('change', ()=>{
        const v = ip.type === 'checkbox' ? ip.checked.toString() : ip.value;
        localStorage.setItem(key, v);
      });
    });
  }
  // attach save action for Settings "Save All Settings" and Profile "Save Changes"
  // find buttons by text
  Array.from(document.querySelectorAll('#profileContent button, #settingsContent button')).forEach(btn=>{
    const txt = (btn.textContent||'').trim().toLowerCase();
    if(txt.includes('save')){
      btn.addEventListener('click', ()=>{
        // save all inputs in the parent section
        const root = btn.closest('section');
        if(!root) return;
        const inputs = root.querySelectorAll('input,textarea,select');
        inputs.forEach(ip=>{
          const key = 'mp_profile_' + (ip.name || ip.id || ip.placeholder || ip.getAttribute('aria-label') || '');
          const v = ip.type === 'checkbox' ? ip.checked.toString() : ip.value;
          localStorage.setItem(key, v);
        });
        toast('Saved settings');
      });
    }
  });

  // initialize small UX states
  // If user clicks user menu button, toggle dropdown (simple)
  $('#userMenuButton')?.addEventListener('click', ()=> { $('#userDropdown')?.classList.toggle('hidden'); });
  // close dropdown on outside click
  document.addEventListener('click', (ev)=>{ if(ev.target.closest('#userMenuButton')) return; if(ev.target.closest('#userDropdown')) return; $('#userDropdown')?.classList.add('hidden'); });

  // attach handlers to liked songs section controls (like-play will be wired when list loaded)
  // When the app loads, if user had previously opened app, show home
  if(!SECTIONS.app.classList.contains('hidden')){ /* nothing */ } // leave as is
  // else keep landing shown - user will click Get Started.

  // expose a console helper
  window.MP = { playNow: (t)=> player.playNow(t), toggleLike, getLiked };

})();
</script>
<!-- END: MusicPioneer Script & Mini Player -->

</body>
</html>
