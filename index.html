<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Music Pioneer - Stunning Modern Music App</title>
  <meta name="description" content="Next-gen music app with AI, gamification, social, visual, and advanced UX features.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Roboto:wght@400;900&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <style>
    :root {
      --bg-primary: #18181b;
      --bg-secondary: rgba(40,40,60,0.87);
      --bg-tertiary: rgba(255,255,255,0.10);
      --glass: rgba(255,255,255,0.12);
      --text-primary: #f6f6fa;
      --text-secondary: #a3a3be;
      --accent: linear-gradient(90deg,#f72585 0%,#7209b7 50%,#4cc9f0 100%);
      --accent-solid: #f72585;
      --accent-hover: #4cc9f0;
      --border: #404066;
      --neon: 0 0 16px #7209b7,0 0 32px #4cc9f0;
      --action-btn: #f72585;
      --action-btn-hover: #4cc9f0;
      --high-contrast-bg: #000;
      --high-contrast-txt: #fff;
    }
    [data-theme="light"] {
      --bg-primary: #f6f6fa;
      --bg-secondary: #eaf6fb;
      --bg-tertiary: #e1e5ec;
      --glass: rgba(40,44,52,0.08);
      --text-primary: #18181b;
      --text-secondary: #333;
      --border: #cdd1e0;
    }
    [data-contrast="high"] {
      --bg-primary: var(--high-contrast-bg);
      --text-primary: var(--high-contrast-txt);
      --accent: #fff;
      --glass: #222;
    }
    body {
      font-family: 'Montserrat', 'Roboto', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      overflow: hidden;
      background-image: linear-gradient(120deg, #18181b 0%, #7209b7 100%);
      animation: gradientMove 16s linear infinite alternate;
    }
    @keyframes gradientMove {
      0% {background-position: 0 0;}
      100% {background-position: 120vw 120vh;}
    }
    .parallax-header {
      background: url('https://i.imgur.com/IaIpD9g.jpg') center/cover no-repeat;
      height: 180px; width: 100%;
      position: absolute; top: 0; left: 0;
      z-index: 0;
      filter: blur(4px) brightness(0.5);
      transform: translateY(-30px) scale(1.07);
      will-change: transform;
    }
    .glass {
      background: var(--glass);
      border-radius: 16px;
      box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
      backdrop-filter: blur(11px);
      transition: box-shadow 0.22s cubic-bezier(.68,-0.55,.27,1.55);
    }
    .glass:hover {
      box-shadow: 0 12px 40px 0 #4cc9f0bb,0 0 0 2px #f72585;
    }
    .gradient-text {
      background: var(--accent);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: bold;
      animation: gradientText 3s linear infinite alternate;
    }
    @keyframes gradientText {
      0% {background-position: 0 0;}
      100% {background-position: 200px 0;}
    }
    .sidebar {width: 248px; background: var(--bg-secondary); padding: 20px 0; position: fixed; height: 100%; overflow-y: auto; transition: width 0.3s; z-index: 1000;}
    .sidebar .logo {padding: 0 20px 20px; text-align: center; border-bottom: 1px solid var(--border);}
    .sidebar .logo span {font-size: 28px; font-family: 'Montserrat', cursive; font-weight: bold; color: #f72585; text-shadow: var(--neon);}
    .sidebar .avatar {margin: 12px auto 18px; text-align: center;}
    .sidebar .avatar img {width: 68px; border-radius: 50%; box-shadow: 0 0 15px #4cc9f0;}
    .sidebar .avatar .username {color: var(--text-secondary); font-size: 12px; margin-top: 6px;}
    .sidebar .nav-section {padding: 0 16px; margin-bottom: 14px;}
    .sidebar .nav-section h3 {color: var(--text-secondary); font-size: 11px; text-transform: uppercase; margin-bottom: 8px;}
    .sidebar .nav-item {display: flex; align-items: center; padding: 12px 12px 12px 5px; color: var(--text-secondary); text-decoration: none; font-size: 15px; border-radius: 8px; margin-bottom: 2px; transition: all 0.16s cubic-bezier(.68,-0.55,.27,1.55); cursor: pointer; position: relative;}
    .sidebar .nav-item i {margin-right: 16px; width: 20px; text-align: center; font-size: 18px; filter: drop-shadow(0 0 4px #7209b7);}
    .sidebar .nav-item.active, .sidebar .nav-item:hover {color: #fff; background: var(--accent); box-shadow: var(--neon); font-weight: bold;}
    .main-content {margin-left: 248px; width: calc(100% - 248px); padding: 24px 20px 110px 20px; overflow-y: auto; position: relative; z-index: 1; will-change: transform;}
    .section {padding: 20px; background: var(--glass); border-radius: 18px; margin-bottom: 28px; box-shadow: 0 6px 24px rgba(40,40,70,0.14); animation: fadeInUp 0.6s cubic-bezier(.68,-0.55,.27,1.55);}
    @keyframes fadeInUp {0% { opacity: 0; transform: translateY(30px);} 100% { opacity: 1; transform: translateY(0);}}
    .section h2 {color: #4cc9f0; margin-bottom: 18px; font-size: 26px; display: flex; align-items: center; font-weight: 700; letter-spacing: 1px;}
    .section h2 i {margin-right: 10px;}
    .theme-toggle {position: absolute; top: 24px; right: 24px; background: var(--glass); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 22px; color: #fff; box-shadow: 0 0 12px #4cc9f0; cursor: pointer; transition: background 0.2s; z-index: 1050;}
    .theme-toggle:hover {background: #4cc9f0; color: #f72585;}
    .contrast-toggle {position: absolute; top: 75px; right: 24px; background: var(--glass); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 22px; color: #fff; box-shadow: 0 0 12px #f72585; cursor: pointer; transition: background 0.2s; z-index: 1050;}
    .contrast-toggle:hover {background: #f72585; color: #4cc9f0;}
    /* Floating Action Button */
    .fab {position: fixed; right: 28px; bottom: 38px; background: var(--action-btn); color: #fff; border-radius: 50%; width: 62px; height: 62px; box-shadow: 0 8px 30px #f7258580; font-size: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 1200; transition: background 0.2s, transform 0.2s;}
    .fab:hover {background: var(--action-btn-hover); transform: scale(1.08);}
    .animated-album {animation: albumBounce 2s infinite alternate; box-shadow: 0 2px 20px #7209b7bb; transition: transform 0.3s; border-radius: 16px;}
    @keyframes albumBounce {0% {transform: scale(1) rotate(-2deg);}100% {transform: scale(1.04) rotate(2deg);}}
    .mascot-anim {width: 110px; margin:auto; display:block;}
    .toast {position: fixed; bottom: 120px; right: 36px; min-width: 180px; background: var(--glass); color: var(--text-primary); border-radius: 10px; padding: 18px 28px; box-shadow: 0 12px 40px #4cc9f0cc; font-size: 17px; opacity: 0; pointer-events: none; transition: opacity 0.4s; z-index: 1600;}
    .toast.show {opacity: 1; pointer-events: auto;}
    .confetti {position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 2000;}
  </style>
</head>
<body>
  <div class="parallax-header"></div>
  <button class="theme-toggle" onclick="toggleTheme()" id="themeToggleBtn" title="Toggle theme">🌙</button>
  <button class="contrast-toggle" onclick="toggleContrast()" id="contrastToggleBtn" title="High contrast mode">🌓</button>
  <div class="sidebar" id="sidebar">
    <div class="logo"><span class="gradient-text">Music Pioneer</span></div>
    <div class="avatar">
      <img src="https://i.imgur.com/KnQy6zO.png" alt="Anime Avatar">
      <div class="username">Hayasaka</div>
    </div>
    <div class="nav-section">
      <h3>Navigation</h3>
      <a href="#" class="nav-item active" onclick="showSection('home')"><i class="fas fa-home"></i><span>Home</span></a>
      <a href="#" class="nav-item" onclick="showSection('search')"><i class="fas fa-search"></i><span>Search</span></a>
      <a href="#" class="nav-item" onclick="showSection('library')"><i class="fas fa-book"></i><span>Library</span></a>
      <a href="#" class="nav-item" onclick="showSection('playlists')"><i class="fas fa-list"></i><span>Playlists</span></a>
      <a href="#" class="nav-item" onclick="showSection('minigames')"><i class="fas fa-gamepad"></i><span>Mini Games</span></a>
      <a href="#" class="nav-item" onclick="showSection('mascot')"><i class="fas fa-smile"></i><span>Mascot</span></a>
    </div>
    <div class="nav-section">
      <h3>Advanced</h3>
      <a href="#" class="nav-item" onclick="showSection('visualizer')"><i class="fas fa-wave-square"></i><span>Visualizer</span></a>
      <a href="#" class="nav-item" onclick="showSection('gamification')"><i class="fas fa-star"></i><span>Achievements</span></a>
      <a href="#" class="nav-item" onclick="showSection('ai')"><i class="fas fa-robot"></i><span>AI Assistant</span></a>
      <a href="#" class="nav-item" onclick="showSection('personalization')"><i class="fas fa-user-cog"></i><span>Personalize</span></a>
      <a href="#" class="nav-item" onclick="showSection('leaderboard')"><i class="fas fa-fire"></i><span>Leaderboard</span></a>
      <a href="#" class="nav-item" onclick="showSection('community')"><i class="fas fa-comments"></i><span>Community</span></a>
      <a href="#" class="nav-item" onclick="showSection('karaoke')"><i class="fas fa-microphone"></i><span>Karaoke</span></a>
      <a href="#" class="nav-item" onclick="showSection('audiofx')"><i class="fas fa-sliders-h"></i><span>Audio FX</span></a>
      <a href="#" class="nav-item" onclick="showSection('live')"><i class="fas fa-broadcast-tower"></i><span>Live</span></a>
      <a href="#" class="nav-item" onclick="showSection('accessibility')"><i class="fas fa-universal-access"></i><span>Accessibility</span></a>
      <a href="#" class="nav-item" onclick="showSection('discover')"><i class="fas fa-globe"></i><span>Discover</span></a>
    </div>
  </div>
  <div class="main-content" id="mainContent">
    <!-- Home Section -->
    <div id="home" class="section">
      <h2><i class="fas fa-home"></i> Home</h2>
      <div class="carousel" id="discoveryCarousel">
        <img src="https://i.imgur.com/IaIpD9g.jpg" class="animated-album" alt="Trending Album" style="width:220px;">
      </div>
      <div class="trending" id="trending"></div>
    </div>
    <!-- Visualizer Section -->
    <div id="visualizer" class="section" style="display:none;">
      <h2><i class="fas fa-wave-square"></i> Music Visualizer (Animated)</h2>
      <canvas id="musicCanvas" width="600" height="150" style="background:#222;border-radius:16px;width:100%;"></canvas>
      <div style="margin-top:12px;">Enjoy real-time waveform and spectrum while listening! (stub, connect to player)</div>
    </div>
    <!-- Gamification Section -->
    <div id="gamification" class="section" style="display:none;">
      <h2><i class="fas fa-star"></i> Achievements & Badges</h2>
      <div id="badges"></div>
      <div style="margin-top:12px;">XP: <span id="xpLevel">0</span> | Level: <span id="userLevel">1</span></div>
      <button onclick="claimMission()" class="glass">Claim Daily Mission</button>
    </div>
    <!-- AI Assistant Section -->
    <div id="ai" class="section" style="display:none;">
      <h2><i class="fas fa-robot"></i> AI Music Assistant</h2>
      <input type="text" id="aiInput" placeholder="Ask for recommendations or help..." style="width:70%;padding:10px;border-radius:8px;">
      <button onclick="askAI()" class="glass">Ask</button>
      <div id="aiResponse" style="margin-top:18px;"></div>
    </div>
    <!-- Personalization Section -->
    <div id="personalization" class="section" style="display:none;">
      <h2><i class="fas fa-user-cog"></i> Personalize Your Profile</h2>
      <input type="text" id="profileBio" placeholder="Write your bio..." style="width:60%;padding:8px;margin-bottom:8px;">
      <input type="url" id="profileSocial" placeholder="Social link..." style="width:60%;padding:8px;">
      <input type="file" id="profileCover" accept="image/*" style="margin-top:6px;">
      <button onclick="saveProfile()" class="glass">Save</button>
    </div>
    <!-- Leaderboard Section -->
    <div id="leaderboard" class="section" style="display:none;">
      <h2><i class="fas fa-fire"></i> Leaderboard</h2>
      <ul class="leaderboard-list" id="leaderboardList"></ul>
    </div>
    <!-- Community Section -->
    <div id="community" class="section" style="display:none;">
      <h2><i class="fas fa-comments"></i> Community</h2>
      <button onclick="toggleChatPanel()" style="margin-bottom:10px;" class="glass">Open Chat</button>
      <div><strong>Join the discussion!</strong></div>
    </div>
    <!-- Karaoke Section -->
    <div id="karaoke" class="section" style="display:none;">
      <h2><i class="fas fa-microphone"></i> Karaoke Mode</h2>
      <div id="karaokeLyrics" style="margin:auto;width:80%;padding:16px;text-align:center;background:var(--glass);border-radius:12px;"></div>
      <button onclick="toggleKaraoke()" class="glass" style="margin-top:8px;">Hide Vocals</button>
    </div>
    <!-- Audio FX Section -->
    <div id="audiofx" class="section" style="display:none;">
      <h2><i class="fas fa-sliders-h"></i> Audio Effects</h2>
      <label>Bass:</label>
      <input type="range" min="0" max="100" id="bassSlider">
      <label>Treble:</label>
      <input type="range" min="0" max="100" id="trebleSlider">
      <label>Speed:</label>
      <input type="range" min="50" max="150" id="speedSlider">
      <button onclick="nightcoreMode()" class="glass">Nightcore Mode</button>
    </div>
    <!-- Live Section -->
    <div id="live" class="section" style="display:none;">
      <h2><i class="fas fa-broadcast-tower"></i> Live Listening Party</h2>
      <button onclick="joinLive()" class="glass">Join Live</button>
      <div id="liveStatus" style="margin-top:12px;"></div>
    </div>
    <!-- Accessibility Section -->
    <div id="accessibility" class="section" style="display:none;">
      <h2><i class="fas fa-universal-access"></i> Accessibility</h2>
      <button onclick="ttsLyrics()" class="glass">Text to Speech Lyrics</button> <span id="ttsStatus"></span>
      <button onclick="toggleContrast()" class="glass">High Contrast Mode</button>
      <div style="margin-top:12px;">Site is keyboard navigable & screen-reader friendly.</div>
    </div>
    <!-- Discover Section -->
    <div id="discover" class="section" style="display:none;">
      <h2><i class="fas fa-globe"></i> Discoverability</h2>
      <div id="genreWheel"></div>
      <div id="songMap"></div>
    </div>
    <!-- Mini Games Section -->
    <div id="minigames" class="section" style="display:none;">
      <h2><i class="fas fa-gamepad"></i> Mini Games</h2>
      <button onclick="startTrivia()" class="glass">Music Trivia</button>
      <button onclick="startGuessSong()" class="glass">Guess the Song</button>
      <div id="gameArea"></div>
    </div>
    <!-- Mascot Section with Lottie animation -->
    <div id="mascot" class="section" style="display:none;">
      <h2><i class="fas fa-smile"></i> Mascot</h2>
      <lottie-player src="https://assets4.lottiefiles.com/packages/lf20_0yfsb3a1.json" background="transparent" speed="1" class="mascot-anim" loop autoplay></lottie-player>
      <div id="mascotChat" style="margin-top:8px;">Hi! I'm Hayasaka, your music buddy! Ask me anything or just say hi!</div>
      <input type="text" id="mascotInput" placeholder="Talk to mascot..." style="width:60%;padding:8px;">
      <button onclick="talkMascot()" class="glass">Send</button>
    </div>
    <!-- Other sections (search, library, etc.) can be inserted here -->
  </div>
  <!-- Floating Action Button -->
  <div class="fab" onclick="showToast('Quick Play!')"><i class="fas fa-play"></i></div>
  <!-- Smart Toast -->
  <div class="toast" id="toastMsg"></div>
  <!-- Confetti Canvas -->
  <canvas class="confetti" id="confettiCanvas"></canvas>
  <!-- Community Chat Panel -->
  <div class="chat-panel" id="chatPanel" style="display:none;position:fixed;right:24px;bottom:110px;width:320px;max-height:400px;background:var(--glass);border-radius:14px;box-shadow:var(--neon);flex-direction:column;z-index:1200;">
    <div class="chat-header" style="padding:12px;border-bottom:1px solid var(--border);font-weight:bold;color:#4cc9f0;">Community Chat</div>
    <div class="chat-messages" id="chatMessages" style="flex:1;padding:12px;overflow-y:auto;font-size:13px;"></div>
    <div class="chat-input" style="display:flex;border-top:1px solid var(--border);">
      <input type="text" id="chatInput" placeholder="Type a message..." style="flex:1;padding:8px 10px;border:none;background:transparent;color:var(--text-primary);outline:none;font-size:14px;">
      <button onclick="sendChat()" style="background:var(--accent);border:none;color:#fff;padding:8px 16px;cursor:pointer;border-radius:0 14px 14px 0;">Send</button>
    </div>
  </div>
  <script>
    // Visualizer stub
    function showVisualizer() {
      const canvas = document.getElementById('musicCanvas');
      const ctx = canvas.getContext('2d');
      let bars = 80;
      function drawVisualizer() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(let i=0;i<bars;i++){
          let h = Math.random()*canvas.height;
          ctx.fillStyle = `hsl(${i*5},80%,60%)`;
          ctx.fillRect(i*7,canvas.height-h,6,h);
        }
        requestAnimationFrame(drawVisualizer);
      }
      drawVisualizer();
    }
    // Gamification
    function claimMission(){document.getElementById('xpLevel').innerText = parseInt(document.getElementById('xpLevel').innerText)+10;}
    // AI Recommendation
    function askAI(){document.getElementById('aiResponse').innerText="Try 'Chill Vibes' playlist!";}
    // Personalization
    function saveProfile(){showToast("Profile saved!");}
    // Karaoke & Lyrics
    function toggleKaraoke(){document.getElementById('karaokeLyrics').innerText="🎤 La la la...";}
    // Audio Effects
    function nightcoreMode(){showToast("Nightcore mode activated!");}
    // Live Listening
    function joinLive(){document.getElementById('liveStatus').innerText="Joined live listening party!";launchConfetti();}
    // Accessibility
    function ttsLyrics(){
      let utter = new SpeechSynthesisUtterance("La la la... these are the lyrics!");
      speechSynthesis.speak(utter);
      document.getElementById('ttsStatus').innerText="Reading lyrics aloud...";
    }
    function toggleContrast(){
      if(document.body.getAttribute('data-contrast')==="high"){document.body.removeAttribute('data-contrast');}
      else{document.body.setAttribute('data-contrast','high');}
    }
    // Discoverability
    function showGenreWheel(){
      document.getElementById('genreWheel').innerText="🎶 Genre & Mood Wheel (coming soon)";
      document.getElementById('songMap').innerText="🌍 Song Map (coming soon)";
    }
    // Mini Games & Mascot
    function startTrivia(){
      showToast("Trivia started!");
      document.getElementById('gameArea').innerText="🎵 Trivia: Who sang 'Shape of You'?";
      launchConfetti();
    }
    function startGuessSong(){
      showToast("Guess the song!");
      document.getElementById('gameArea').innerText="🎵 Guess the Song: Playing audio...";
      launchConfetti();
    }
    function talkMascot(){
      let txt = document.getElementById('mascotInput').value;
      document.getElementById('mascotChat').innerText="Hayasaka: "+(txt ? "Cool! "+txt : "Hello!");
      showToast("Mascot replied!");
      launchConfetti();
    }
    // Section navigation
    function showSection(section){
      document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
      document.getElementById(section).style.display = 'block';
      document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
      event.target.closest('.nav-item').classList.add('active');
      if(section==='visualizer')showVisualizer();
      if(section==='leaderboard')loadLeaderboard();
      if(section==='discover')showGenreWheel();
      if(section==='home')parallaxScroll();
    }
    // Toasts
    function showToast(msg){
      const toast = document.getElementById('toastMsg');
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2600);
    }
    // Parallax header
    function parallaxScroll(){
      window.addEventListener('scroll', () => {
        const header = document.querySelector('.parallax-header');
        header.style.transform = `translateY(${-window.scrollY/6}px) scale(1.07)`;
      });
    }
    // Confetti effect
    function launchConfetti(){
      const canvas=document.getElementById('confettiCanvas');
      const ctx=canvas.getContext('2d');
      canvas.width=window.innerWidth;
      canvas.height=window.innerHeight;
      let pieces=[];
      for(let i=0;i<80;i++){
        pieces.push({x:Math.random()*canvas.width, y:-20, r:Math.random()*8+4, c:`hsl(${Math.random()*360},80%,60%)`, v:Math.random()*4+2});
      }
      let frame=0;
      function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        pieces.forEach(p=>{
          ctx.beginPath();
          ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
          ctx.fillStyle=p.c;
          ctx.fill();
          p.y+=p.v;
        });
        frame++;
        if(frame<50)requestAnimationFrame(draw);
        else ctx.clearRect(0,0,canvas.width,canvas.height);
      }
      draw();
    }
    // Chat panel
    function toggleChatPanel(){document.getElementById('chatPanel').style.display=document.getElementById('chatPanel').style.display==='none'?'flex':'none';}
    function sendChat(){
      const chatInput=document.getElementById('chatInput');
      const chatMessages=document.getElementById('chatMessages');
      if(chatInput.value.trim()!==""){
        const msgDiv=document.createElement('div');
        msgDiv.textContent="You: "+chatInput.value;
        chatMessages.appendChild(msgDiv);
        chatInput.value='';
        chatMessages.scrollTop=chatMessages.scrollHeight;
      }
    }
    // Leaderboard
    function loadLeaderboard(){
      const leaderboard=[{title:"Song 1",artist:"Hayasaka"},{title:"Song 2",artist:"Chika"},{title:"Song 3",artist:"Kaguya"}];
      const list=document.getElementById('leaderboardList');
      list.innerHTML="";
      leaderboard.forEach((entry,idx)=>{
        const li=document.createElement('li');
        li.textContent=`#${idx+1}: ${entry.title} by ${entry.artist}`;
        list.appendChild(li);
      });
    }
    // Initial load: animated carousel, parallax, genre wheel, etc.
    document.addEventListener('DOMContentLoaded',()=>{
      parallaxScroll();
      document.getElementById('discoveryCarousel').innerHTML += `<img src="https://i.imgur.com/KnQy6zO.png" class="animated-album" alt="Trending Album" style="width:220px;">`;
      showGenreWheel();
    });
    // Theme toggle
    function toggleTheme(){
      let theme = document.body.getAttribute('data-theme');
      theme = theme === "light" ? "dark" : "light";
      document.body.setAttribute('data-theme', theme);
      document.getElementById('themeToggleBtn').innerText = theme === "light" ? "🌙" : "☀️";
    }
  </script>
</body>
</html>
