<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Music Pioneer</title>
  <meta name="description" content="Discover and search songs with Music Pioneer.">
  <meta name="keywords" content="music, songs, search, jiosaavn, pioneer">
  <meta property="og:title" content="Music Pioneer">
  <meta property="og:image" content="https://yourdomain.com/preview.jpg">
  <style>
    /* --- SAME STYLES AS BEFORE --- */
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 20px;
      background: #000000;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      transition: background 0.3s;
    }
    .light-mode { background: #e0f7fa; }
    .container {
      max-width: 900px;
      width: 100%;
      padding: 30px;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(0, 206, 209, 0.3);
      transition: background 0.3s, color 0.3s;
    }
    .light-mode .container { background: rgba(0, 206, 209, 0.1); color: #000000; }
    h2 { text-align: center; color: #00FFFF; font-size: 2.5em; margin-bottom: 20px; }
    .light-mode h2 { color: #00CED1; }
    .search-bar { display: flex; justify-content: center; margin-bottom: 25px; }
    input {
      padding: 12px;
      width: 350px;
      border: 2px solid #00FFFF;
      border-radius: 25px;
      font-size: 16px;
      outline: none;
      background: rgba(255, 255, 255, 0.1);
      color: #00FFFF;
    }
    input::placeholder { color: rgba(0, 255, 255, 0.5); }
    .light-mode input { border-color: #00CED1; background: rgba(0,206,209,0.1); color: #000000; }
    button {
      padding: 12px 20px;
      margin-left: 10px;
      border: none;
      background: #00FFFF;
      color: #000000;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover { background: #00CED1; transform: scale(1.05); }
    .results { margin-top: 20px; }
    .song {
      display: flex;
      align-items: center;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 15px;
      background: rgba(0, 255, 255, 0.1);
    }
    .song img {
      max-height: 80px;
      min-width: 80px;
      border-radius: 10px;
      margin-right: 15px;
      object-fit: cover;
    }
    .song-details { flex-grow: 1; color: #00FFFF; }
    .song-details strong { font-size: 1.2em; color: #00CED1; }
    .player-controls { display: flex; align-items: center; gap: 10px; }
    .play-btn, .mute-btn, .fav-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.5em;
      color: #00FFFF;
    }
    .progress {
      width: 200px;
      height: 5px;
      background: rgba(0,255,255,0.3);
      border-radius: 5px;
      cursor: pointer;
    }
    .error { color: #ff6b6b; text-align: center; font-size: 1.1em; }
    .loading { text-align: center; color: #00CED1; font-size: 1.2em; }
    #trending { margin-top: 20px; color: #00FFFF; text-align: center; }
    .contact { text-align: right; margin-top: 10px; }
    .contact a { color: #00FFFF; text-decoration: none; }
    @media (max-width: 600px) {
      .container { padding: 15px; }
      input { width: 200px; }
      .song { flex-direction: column; text-align: center; }
      .song img { margin-bottom: 10px; }
      .player-controls { justify-content: center; margin-top: 10px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <button onclick="toggleTheme()" style="position:absolute;top:20px;right:20px;border-radius:50%;width:40px;height:40px;">üåô</button>
    <h2>üéµ Music Pioneer</h2>
    <div class="search-bar">
      <input type="text" id="query" placeholder="Enter artist or song name...">
      <button onclick="searchSongs()">Search</button>
    </div>
    <div id="trending">
      <h3>Trending Now</h3>
      <p>1. Deva Deva - Arijit Singh</p>
      <p>2. Kesariya - Pritam</p>
      <p>3. Raataan Lambiyan - Tanishk Bagchi</p>
    </div>
    <div class="results" id="results"></div>
    <div class="contact">
      <a href="mailto:contact@musicpioneer.com">Contact Us</a>
    </div>
  </div>

<script>
  const audioElements = new Map();
  let searchResults = [];

  async function searchSongs() {
    const query = document.getElementById("query").value.trim();
    const resultsDiv = document.getElementById("results");
    if (!query) {
      resultsDiv.innerHTML = "<p class='error'>Please enter a search term.</p>";
      return;
    }
    resultsDiv.innerHTML = "<p class='loading'>Loading...</p>";

    try {
      const apiUrl = `https://saavn.dev/api/search/songs?query=${encodeURIComponent(query)}`;
      const res = await fetch(apiUrl);
      const data = await res.json();

      resultsDiv.innerHTML = "";
      if (!data.data || !data.data.results || data.data.results.length === 0) {
        resultsDiv.innerHTML = "<p>No results found.</p>";
        return;
      }

      searchResults = data.data.results;
      searchResults.slice(0, 10).forEach((song, index) => {
        const div = document.createElement("div");
        div.className = "song";

        const songTitle = song.name || "Unknown Title";
        const singers = song.artists?.primary?.map(a => a.name).join(", ") || "Unknown";
        const album = song.album?.name || "N/A";
        const imageUrl = song.image?.[1]?.url || "";
        const songUrl = song.url || "";
        const audioUrl = song.downloadUrl?.[4]?.link || "";

        div.innerHTML = `
          <img src="${imageUrl}" alt="cover">
          <div class="song-details">
            <strong>${songTitle}</strong><br>
            <span>by ${singers}</span><br>
            <span>Album: ${album}</span>
          </div>
          <div class="player-controls">
            <button class="play-btn" onclick="togglePlay(${index}, this)">‚ñ∂</button>
            <button class="mute-btn" onclick="toggleMute(${index}, this)">üîä</button>
            <input type="range" class="progress" min="0" max="100" value="0" oninput="seekAudio(${index}, this.value)">
            <button class="fav-btn" onclick="toggleFavorite(${index}, this)">‚ù§Ô∏è</button>
            <a href="${songUrl}" target="_blank">Play on JioSaavn</a>
          </div>
        `;
        resultsDiv.appendChild(div);

        if (audioUrl) {
          const audio = new Audio(audioUrl);
          audio.addEventListener("timeupdate", () => {
            const progress = document.querySelector(`.progress[data-index="${index}"]`);
            if (progress && audio.duration) {
              progress.value = (audio.currentTime / audio.duration) * 100;
            }
          });
          audioElements.set(index, audio);
        }
      });
    } catch (err) {
      resultsDiv.innerHTML = `<p class="error">Error: ${err.message}</p>`;
    }
  }

  function togglePlay(index, btn) {
    const audio = audioElements.get(index);
    if (audio) {
      if (audio.paused) {
        audio.play();
        btn.textContent = "‚è∏";
      } else {
        audio.pause();
        btn.textContent = "‚ñ∂";
      }
    }
  }

  function toggleMute(index, btn) {
    const audio = audioElements.get(index);
    if (audio) {
      audio.muted = !audio.muted;
      btn.textContent = audio.muted ? "üîá" : "üîä";
    }
  }

  function seekAudio(index, value) {
    const audio = audioElements.get(index);
    if (audio && audio.duration) {
      audio.currentTime = (value / 100) * audio.duration;
    }
  }

  function toggleFavorite(index, btn) {
    let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
    const song = searchResults[index];
    if (!song) return;
    const songId = song.id;
    if (favorites.includes(songId)) {
      favorites = favorites.filter(id => id !== songId);
      btn.style.color = "#00FFFF";
    } else {
      favorites.push(songId);
      btn.style.color = "#00CED1";
    }
    localStorage.setItem("favorites", JSON.stringify(favorites));
  }

  function toggleTheme() {
    document.body.classList.toggle("light-mode");
    const button = document.querySelector('button[onclick="toggleTheme()"]');
    if (document.body.classList.contains("light-mode")) {
      button.textContent = "üåû";
      localStorage.setItem("theme", "light");
    } else {
      button.textContent = "üåô";
      localStorage.setItem("theme", "dark");
    }
  }

  // Load saved theme
  window.onload = () => {
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "light") {
      document.body.classList.add("light-mode");
      document.querySelector('button[onclick="toggleTheme()"]').textContent = "üåû";
    }
  };

  // Enter key support
  document.getElementById("query").addEventListener("keypress", (e) => {
    if (e.key === "Enter") searchSongs();
  });
</script>
</body>
</html>
